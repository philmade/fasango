(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2281],{64795:function(e,t,r){"use strict";r.d(t,{K:function(){return u},Y:function(){return l}});var n=r(34789),s=r(85742),i=r(23753),o=r(4708),a=r(29324),c=r(24246),l=["Pricing","My project isn't getting traction","Poor customer service","Missing feature","I didn't see the value","Supabase didn't meet my needs","Dashboard is too complicated","Postgres is too complicated","Problem not solved","Bug issues","I decided to use something else","My work has finished/discontinued","I\u2019m migrating to/starting a new project","None of the above"],u=[{title:"Database",icon:(0,c.jsx)(n.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"db_size",attribute:"total_db_size_bytes",title:"Database size",units:"bytes",costPerUnit:.125,tooltip:(0,c.jsxs)("span",{children:["Billing is based on the average daily database size in GB throughout the billing period."," ",(0,c.jsx)("a",{href:"https://supabase.com/docs/guides/platform/database-usage",target:"_blank",rel:"noreferrer",children:"Docs"})]})},{key:"db_egress",attribute:"total_egress_modified",title:"Database egress",units:"bytes",costPerUnit:.09,tooltip:(0,c.jsx)("span",{children:"Database egress contains any outgoing traffic (egress) from your database. Billing is based on the total sum of egress in GB throughout your billing period."})}]},{title:"Auth",icon:(0,c.jsx)(s.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"monthly_active_users",attribute:"total_auth_billing_period_mau",title:"Monthly Active Users",units:"absolute",costPerUnit:.00325,tooltip:(0,c.jsx)("span",{children:"The amount of distinct users requesting your API throughout the billing period. Resets at the beginning of every billing period."})},{key:"monthly_active_sso_users",attribute:"total_auth_billing_period_sso_mau",title:"Monthly Single Sign-On Users",units:"absolute",costPerUnit:.015,tooltip:(0,c.jsx)("span",{children:"The amount of distinct Single Sign-On users requesting your API throughout the billing period. Resets at the beginning of every billing period."})}]},{title:"Storage",icon:(0,c.jsx)(i.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"storage_size",attribute:"total_storage_size_bytes",title:"Storage space",units:"bytes",costPerUnit:.021,tooltip:(0,c.jsx)("span",{children:"The storage size is the sum of all objects in your storage buckets. Billing is based on the average size in GB throughout your billing period."})},{key:"storage_egress",attribute:"total_storage_egress",title:"Storage egress",units:"bytes",costPerUnit:.09,tooltip:(0,c.jsx)("span",{children:"Storage egress contains any outgoing traffic (egress) from your storage buckets, only download operations are counted. We currently do not differentiate between no-cache and cache hits. Billing is based on the total amount of egress in GB throughout your billing period."})},{key:"storage_image_render_count",attribute:"total_storage_image_render_count",title:"Storage Image Transformations",units:"absolute",costPerUnit:.005,tooltip:(0,c.jsx)("span",{children:"We distinctly count all images transformed in the billing period, ignoring any transformations. Transforming one image with different transformations (i.e. once with height=50 and once with height=150), only counts as one. Resets at the beginning of every billing period."})}]},{title:"Functions",icon:(0,c.jsx)(o.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"func_count",attribute:"total_func_count",title:"Function Count",units:"absolute",costPerUnit:.1,tooltip:(0,c.jsx)("span",{children:"We continuously monitor the amount of serverless functions in your project. Billing is based on the maximum amount of functions at any point in time throughout your billing period."})},{key:"func_invocations",attribute:"total_func_invocations",title:"Function Invocations",units:"absolute",costPerUnit:2e-6,tooltip:(0,c.jsx)("span",{children:"Every single serverless function invocation independent of response status is counted. Billing is based on the sum of all invocations throughout your billing period."})}]},{title:"Realtime",icon:(0,c.jsx)(a.Z,{className:"dark:text-scale-100",size:16,strokeWidth:2}),features:[{key:"realtime_message_count",attribute:"total_realtime_message_count",title:"Realtime Messages",units:"absolute",costPerUnit:25e-7,tooltip:(0,c.jsx)("span",{children:"Billing is based on the total amount of messages throughout your billing period."})},{key:"realtime_peak_connection",attribute:"total_realtime_peak_connection",title:"Realtime Concurrent Peak Connections",units:"absolute",costPerUnit:.01,tooltip:(0,c.jsx)("span",{children:"Billing is based on the maximum amount of concurrent peak connections throughout your billing period."})}]}]},33003:function(e,t,r){"use strict";r.d(t,{iN:function(){return h},ph:function(){return o},by:function(){return p},hj:function(){return c},B4:function(){return d},S0:function(){return l},ld:function(){return s}});var n=r(24246);function s(e){return(0,n.jsxs)("div",{className:"mx-auto max-w-4xl px-5 pt-12 pb-20",children:[e.header&&(0,n.jsx)("h1",{className:"text-scale-1200 mb-8 text-3xl",children:e.header}),(0,n.jsx)("div",{className:"space-y-20",children:e.children})]})}var i=r(16792),o=function(e){var t=e.title,r=e.description;return(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h3",{className:"text-scale-1200 mb-2 text-xl",children:(0,n.jsx)(i.D,{unwrapDisallowed:!0,disallowedElements:["p"],children:t})}),r&&(0,n.jsx)("div",{className:"text-scale-900 text-sm",children:(0,n.jsx)(i.D,{children:r})})]})},a=r(27378),c=function(e){var t=e.children,r=e.header,s=e.disabled,i=e.visible,o=void 0===i||i,a=e.className,c=["grid grid-cols-12 gap-6 px-8 py-8","".concat(s?" opacity-30":" opacity-100"),"".concat(o?" block":" hidden"),"".concat(a)];return(0,n.jsxs)("div",{className:c.join(" "),children:[r,t]})},l=function(e){var t=e.children,r=e.className,s=void 0===r?"":r,i=e.description;return void 0!==i?(0,n.jsxs)("div",{className:"flex flex-col space-y-2 col-span-12 lg:col-span-5 ".concat(s),children:[(0,n.jsx)("label",{className:"text-scale-1200 text-sm",children:t}),i]}):(0,n.jsx)("label",{className:"text-scale-1200 col-span-12 text-sm lg:col-span-5 ".concat(s),children:t})},u=function(){return(0,n.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,n.jsx)("div",{className:"shimmering-loader h-2 w-1/3 rounded"}),(0,n.jsx)("div",{className:"flex flex-col justify-between space-y-2",children:(0,n.jsx)("div",{className:"shimmering-loader h-[34px] w-2/3 rounded"})})]})},d=function(e){var t=e.children,r=e.loading,s=void 0===r||r,i=e.fullWidth,o=e.className;return(0,n.jsx)("div",{className:"\n        relative col-span-12 flex flex-col gap-6 lg:col-span-7\n        ".concat(i&&"!col-span-12","\n        ").concat(o,"\n      "),children:s?a.Children.map(t,(function(e){return(0,n.jsx)(u,{})})):t})},p=function(e){var t=e.children,r=e.header,s=e.footer;return(0,n.jsxs)("div",{className:" bg-scale-100 dark:bg-scale-300 border-scale-400 overflow-hidden  rounded-md border shadow",children:[r&&(0,n.jsx)("div",{className:" border-scale-400 border-b px-8 py-4",children:r}),(0,n.jsx)("div",{className:"divide-scale-400 flex flex-col gap-0 divide-y",children:t}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-scale-400 border-t"}),s]})]})},f=r(47314),h=function(e){var t=e.form,r=e.hasChanges,s=void 0===r?void 0:r,i=e.handleReset,o=e.helper,a=e.disabled,c=void 0!==a&&a,l=e.isSubmitting,u=e.submitText,d=void 0===u?"Save":u,p=l||c||!s&&void 0!==s;return(0,n.jsxs)("div",{className:["flex w-full items-center gap-2",o?"justify-between":"justify-end"].join(" "),children:[o&&(0,n.jsx)("span",{className:"text-sm text-scale-900",children:o}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(f.z,{disabled:p,type:"default",htmlType:"reset",onClick:function(){return i()},children:"Cancel"}),(0,n.jsx)(f.z,{form:t,type:"primary",htmlType:"submit",disabled:p,loading:l,children:d})]})]})}},33114:function(e,t,r){"use strict";var n=r(79894),s=r.n(n),i=r(27378),o=r(93942),a=r(78651),c=r(47314),l=r(65961),u=r(24246);t.Z=function(e){var t=e.icon,r=e.title,n=e.description,d=e.url,p=e.urlLabel,f=void 0===p?"Read more":p,h=e.defaultVisibility,m=void 0!==h&&h,x=e.hideCollapse,j=void 0!==x&&x,v=e.button,b=e.className,g=void 0===b?"":b,y=e.block,w=void 0!==y&&y,N=(0,i.useState)(m),O=N[0],k=N[1];return(0,u.jsx)("div",{className:"".concat(w?"block w-full":"","\n      block w-full rounded border border-scale-600 bg-scale-100 py-3 dark:border-scale-500 dark:bg-scale-400 ").concat(g),children:(0,u.jsxs)("div",{className:"flex flex-col px-4",children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsxs)("div",{className:"flex w-full space-x-3 lg:items-start",children:[t&&(0,u.jsx)("span",{className:"text-scale-900",children:t}),(0,u.jsx)("div",{className:"flex-grow",children:(0,u.jsx)("h5",{className:"text-sm text-scale-1200",children:r})})]}),n&&!j?(0,u.jsx)("div",{className:"cursor-pointer text-scale-900",onClick:function(){return k(!O)},children:O?(0,u.jsx)(o.Z,{size:14,strokeWidth:1.5}):(0,u.jsx)(a.Z,{size:14,strokeWidth:1.5})}):null]}),(n||d||v)&&(0,u.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(O?"mt-3":""),style:{maxHeight:O?500:0},children:[(0,u.jsx)("div",{className:"text-scale-1100 text-sm",children:n}),d&&(0,u.jsx)(s(),{href:d,children:(0,u.jsx)("a",{target:"_blank",rel:"noreferrer",className:"pt-2",children:(0,u.jsx)(c.z,{type:"default",icon:(0,u.jsx)(l.Z,{}),children:f})})}),v&&(0,u.jsx)("div",{children:v})]})]})})}},69497:function(e,t,r){"use strict";var n=r(47314),s=r(43659),i=r(79894),o=r.n(i),a=r(98213),c=r(27102),l=r(36802),u=r(20796),d=r(68043),p=r(24246);t.Z=(0,s.Pi)((function(e){var t,r=e.icon,s=e.primaryText,i=(e.projectRef,e.secondaryText),f=(0,c.oR)().ui,h=(0,l.UO)().ref,m=null===(t=f.selectedProject)||void 0===t?void 0:t.subscription_tier,x=(0,c.FH)(d.KA.BILLING_WRITE,"stripe.subscriptions"),j=(0,c.P5)("disableProjectCreationAndUpdate"),v=m===u.ev.ENTERPRISE;return(0,p.jsx)("div",{className:["block w-full rounded border border-opacity-20 py-4 px-6","border-gray-600 bg-gray-100","dark:border-gray-300 dark:bg-gray-400"].join(" "),children:(0,p.jsxs)("div",{className:"flex space-x-3",children:[r&&(0,p.jsx)("div",{className:"mt-1",children:r}),(0,p.jsxs)("div",{className:"flex w-full items-center justify-between space-x-32",children:[(0,p.jsxs)("div",{className:"space-y-1",children:[(0,p.jsx)("p",{className:"text-sm",children:s}),(0,p.jsx)("div",{children:(0,p.jsx)("p",{className:"text-sm text-scale-1100",children:i})})]}),(0,p.jsxs)(a.fC,{delayDuration:0,children:[(0,p.jsx)(a.xz,{children:(0,p.jsx)(n.z,{type:"primary",disabled:!x||j,children:(0,p.jsx)(o(),{href:"/project/".concat(h,v?"/settings/billing/update/enterprise":"/settings/billing/update"),children:(0,p.jsx)("a",{children:m===u.ev.FREE?"Upgrade to Pro":"Modify subscription"})})})}),!x||j?(0,p.jsx)(a.h_,{children:(0,p.jsxs)(a.VY,{side:"bottom",children:[(0,p.jsx)(a.Eh,{className:"radix-tooltip-arrow"}),(0,p.jsx)("div",{className:["border border-scale-200 text-center","rounded bg-scale-100 py-1 px-2 leading-none shadow"].join(" "),children:(0,p.jsx)("span",{className:"text-xs text-scale-1200",children:j?(0,p.jsxs)(p.Fragment,{children:["Subscription changes are currently disabled.",(0,p.jsx)("br",{}),"Our engineers are working on a fix."]}):x?"":"You need additional permissions to amend subscriptions"})})]})}):(0,p.jsx)(p.Fragment,{})]})]})]})})}))},92782:function(e,t,r){"use strict";r.d(t,{U:function(){return n}});var n={subscription:function(e){return["projects",e,"subscription"]},subscriptionV2:function(e){return["projects",e,"subscriptionV2"]},addons:function(e){return["projects",e,"addons"]},plans:function(e){return["projects",e,"plans"]},preview:function(e){return["projects",e,"subscription-preview"]}}},82672:function(e,t,r){"use strict";r.d(t,{S2:function(){return j}});var n=r(90849),s=r(90089),i=r(55732),o=r(34707),a=r.n(o),c=r(36492),l=r(14919),u=r(20796),d=(r(27378),r(92782)),p=["enabled"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t){return x.apply(this,arguments)}function x(){return(x=(0,i.Z)(a().mark((function e(t,r){var n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,l.U2)("".concat(u.T5,"/projects/").concat(n,"/subscription"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,i=void 0===n||n,o=(0,s.Z)(r,p);return(0,c.a)(d.U.subscription(t),(function(e){var r=e.signal;return m({projectRef:t},r)}),h({enabled:i&&"undefined"!==typeof t},o))}},67969:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ft}});var n=r(43659),s=r(42753),i=r(55732),o=r(79305),a=r(34707),c=r.n(a),l=r(77758),u=r(3648),d=r(68043),p=r(27102),f=r(20796),h=r(14919),m=r(33003),x=r(24246),j=function(e){var t,r;(0,o.Z)(e);var n=(0,p.oR)(),s=n.app,a=n.ui,j=a.selectedProject,v="project-general-settings",b={name:null!==(t=null===j||void 0===j?void 0:j.name)&&void 0!==t?t:"",ref:null!==(r=null===j||void 0===j?void 0:j.ref)&&void 0!==r?r:""},g=(0,p.FH)(d.KA.UPDATE,"projects"),y=function(){var e=(0,i.Z)(c().mark((function e(t,r){var n,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.resetForm,e.next=3,(0,h.v_)("".concat(f.T5,"/projects/").concat(null===j||void 0===j?void 0:j.ref,"/update"),{name:t.name.trim()});case 3:(i=e.sent).error?a.setNotification({category:"error",message:"Update project failed: ".concat(i.error.message)}):(o=i.name,n({values:{name:o},initialValues:{name:o}}),s.onProjectUpdated(i),a.setNotification({category:"success",message:"Successfully saved settings"}));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,x.jsx)(l.Z,{id:v,initialValues:b,onSubmit:y,children:function(e){var t=e.isSubmitting,r=e.handleReset,n=e.values,s=e.initialValues,i=JSON.stringify(n)!==JSON.stringify(s);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(m.ph,{title:"Project Settings",description:""}),(0,x.jsx)(m.by,{disabled:!g,footer:(0,x.jsx)("div",{className:"flex py-4 px-8",children:(0,x.jsx)(m.iN,{form:v,isSubmitting:t,hasChanges:i,handleReset:r,helper:g?void 0:"You need additional permissions to manage this project's settings"})}),children:(0,x.jsx)(m.hj,{header:(0,x.jsx)(m.S0,{children:"General settings"}),children:(0,x.jsxs)(m.B4,{loading:!1,children:[(0,x.jsx)(u.Z,{id:"name",size:"small",label:"Project name",disabled:!g}),(0,x.jsx)(u.Z,{copy:!0,disabled:!0,id:"ref",size:"small",label:"Reference ID"})]})})})]})}})},v=r(79894),b=r.n(v),g=r(84364),y=r(11597),w=r(90849),N=r(27378),O=r(23615),k=r.n(O);function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P.apply(this,arguments)}function _(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var S=(0,N.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,s=e.size,i=void 0===s?24:s,o=_(e,["color","size"]);return N.createElement("svg",P({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),N.createElement("line",{x1:"16.5",y1:"9.4",x2:"7.5",y2:"4.21"}),N.createElement("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),N.createElement("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),N.createElement("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"}))}));S.propTypes={color:k().string,size:k().oneOfType([k().string,k().number])},S.displayName="Package";var Z=S,R=r(12163);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var E=function(e){return(0,x.jsx)(R.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,w.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:Z},e))},C=r(47314),T=r(98213),z=r(36802),A=r(86677),U=r(94269),F=r(33769),L=r(65961),I=r(58728),q=r(33114),W={"postgrest-v10":{title:"Postgrest will be upgraded to V10",url:"https://postgrest.org/en/stable/releases/v10.0.0.html#breaking-changes"}},Y=r(90089),B=r(36492),V=r(49175),M=["enabled"];function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){(0,w.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t){return H.apply(this,arguments)}function H(){return(H=(0,i.Z)(c().mark((function e(t,r){var n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,h.U2)("".concat(f.Q2,"/projects/").concat(n,"/upgrade/eligibility"),{signal:r});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,s=void 0===n||n,i=(0,Y.Z)(r,M);return(0,B.a)(V.U.upgradeEligibility(t),(function(e){var r=e.signal;return X({projectRef:t},r)}),Q({enabled:s&&"undefined"!==typeof t},i))},J=function(e){var t,r,n,s,a;(0,o.Z)(e);var u=(0,A.useRouter)(),d=(0,p.oR)(),m=d.app,j=d.ui,v=(0,z.UO)().ref,g=(0,N.useState)(!1),w=g[0],O=g[1],k=K({projectRef:v}).data,P=(null!==(t=null===k||void 0===k?void 0:k.current_app_version)&&void 0!==t?t:"").split("supabase-postgres-")[1],_=(null!==(r=null===k||void 0===k?void 0:k.latest_app_version)&&void 0!==r?r:"").split("supabase-postgres-")[1],S={version:null!==(n=null===k||void 0===k||null===(s=k.target_upgrade_versions)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.postgres_version)&&void 0!==n?n:0},Z=function(){var e=(0,i.Z)(c().mark((function e(t,r){var n,s,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=r.setSubmitting)(!0),e.next=4,(0,h.v_)("".concat(f.Q2,"/projects/").concat(v,"/upgrade"),{target_version:t.version});case 4:(s=e.sent).error?(j.setNotification({category:"error",error:s.error,message:"Failed to upgrade: ".concat(s.error.message)}),n(!1)):void 0!==(o=null===(i=j.selectedProject)||void 0===i?void 0:i.id)&&(m.onProjectStatusUpdated(o,f.S.UPGRADING),j.setNotification({category:"success",message:"Upgrading project"}),u.push("/project/".concat(v,"?upgradeInitiated=true")));case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(y.Z,{icon:(0,x.jsx)(E,{className:"text-brand-900",strokeWidth:1.5}),variant:"success",title:"Your project can be upgraded to the latest version of Postgres",children:[(0,x.jsxs)("p",{className:"mb-3",children:["The latest version of Postgres (",_,") is available for your project."]}),(0,x.jsx)(C.z,{size:"tiny",type:"primary",onClick:function(){return O(!0)},children:"Upgrade project"})]}),(0,x.jsx)(U.C,{hideFooter:!0,visible:w,onCancel:function(){return O(!1)},header:(0,x.jsx)("h3",{children:"Upgrade Postgres"}),children:(0,x.jsx)(l.Z,{id:"project-upgrade-form",initialValues:S,onSubmit:Z,children:function(e){var t,r,n,s,i=e.values,o=e.isSubmitting,a=(null!==(t=null===k||void 0===k?void 0:k.target_upgrade_versions)&&void 0!==t?t:[]).find((function(e){return e.postgres_version===i.version}));return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"py-6",children:(0,x.jsx)(U.C.Content,{children:(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("p",{className:"text-sm",children:"All services, including Auth, Rest, and Extensions will be upgraded. This action cannot be undone."}),(null!==(r=null===k||void 0===k?void 0:k.potential_breaking_changes)&&void 0!==r?r:[]).length>0&&(0,x.jsx)(q.Z,{icon:(0,x.jsx)(F.Z,{strokeWidth:2}),title:"There will be breaking changes involved with the upgrade",description:(0,x.jsx)("ul",{className:"list-disc pl-4",children:null===k||void 0===k?void 0:k.potential_breaking_changes.map((function(e){var t=W[e];return void 0!==t?(0,x.jsxs)("li",{children:[(0,x.jsx)("p",{className:"text-scale-1200",children:t.title}),(0,x.jsxs)("p",{className:"flex items-center space-x-1",children:[(0,x.jsx)("span",{children:"This update has breaking changes. Read more "}),(0,x.jsx)(b(),{href:t.url,children:(0,x.jsxs)("a",{className:"text-brand-900 opacity-90 flex items-center space-x-1",children:[(0,x.jsx)("span",{children:"here"}),(0,x.jsx)(L.Z,{size:"tiny",strokeWidth:2})]})})]})]},e):null}))})}),(0,x.jsx)(y.Z,{withIcon:!0,variant:"warning",title:"Your project will be offline while the upgrade is in progress",children:"Upgrades will take a few minutes depending on the size of your database. It is advised to upgrade at a time when there will be minimal impact for your application"}),(0,x.jsx)(I.Z,{id:"version",name:"version",label:"Select the version of Postgres to upgrade to",descriptionText:"Postgres will be upgraded from ".concat(P," to ").concat(null!==(n=null===a||void 0===a||null===(s=a.app_version)||void 0===s?void 0:s.split("supabase-postgres-")[1])&&void 0!==n?n:i.version),children:null===k||void 0===k?void 0:k.target_upgrade_versions.map((function(e){return(0,x.jsxs)(I.Z.Option,{value:e.postgres_version,label:"".concat(e.postgres_version," (").concat(e.app_version.split("supabase-postgres-")[1],")"),children:[e.postgres_version," (",e.app_version.split("supabase-postgres-")[1],")"]},e.postgres_version)}))})]})})}),(0,x.jsxs)("div",{className:"flex items-center space-x-2 justify-end px-4 py-4 border-t",children:[(0,x.jsx)(C.z,{type:"default",onClick:function(){return O(!1)},disabled:o,children:"Cancel"}),(0,x.jsx)(C.z,{htmlType:"submit",disabled:o,loading:o,children:"Confirm upgrade"})]})]})}})})]})},$=J;function ee(){return ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ee.apply(this,arguments)}function te(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var re=(0,N.forwardRef)((function(e,t){var r=e.color,n=void 0===r?"currentColor":r,s=e.size,i=void 0===s?24:s,o=te(e,["color","size"]);return N.createElement("svg",ee({ref:t,xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),N.createElement("rect",{x:"6",y:"4",width:"4",height:"16"}),N.createElement("rect",{x:"14",y:"4",width:"4",height:"16"}))}));re.propTypes={color:k().string,size:k().oneOfType([k().string,k().number])},re.displayName="Pause";var ne=re;function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ie=function(e){return(0,x.jsx)(R.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){(0,w.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:ne},e))},oe=r(96364),ae=(0,n.Pi)((function(e){var t,r=e.projectRef,n=e.projectId,s=(0,p.oR)(),o=s.ui,a=s.app,l=(0,A.useRouter)(),u=(0,N.useState)(!1),m=u[0],j=u[1],v=(0,N.useState)(!1),b=v[0],g=v[1],y=function(){return g(!1)},w=(null===o||void 0===o||null===(t=o.selectedProject)||void 0===t?void 0:t.status)===f.S.INACTIVE,O=(0,p.FH)(d.KA.INFRA_EXECUTE,"queue_jobs.projects.pause"),k=function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return",o.setNotification({category:"error",message:"You do not have the required permissions to pause this project"}));case 2:return j(!0),e.next=5,(0,h.v_)("".concat(f.T5,"/projects/").concat(r,"/pause"),{});case 5:(t=e.sent).error?(o.setNotification({error:t.error,category:"error",message:"Failed to pause project"}),j(!1)):(a.onProjectPaused(n),a.onProjectStatusUpdated(n,f.S.GOING_DOWN),o.setNotification({category:"success",message:"Pausing project"}),l.push("/project/".concat(r))),y();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(T.fC,{delayDuration:0,children:[(0,x.jsx)(T.xz,{children:(0,x.jsx)(C.z,{type:"default",icon:(0,x.jsx)(ie,{}),onClick:function(){return g(!0)},loading:m,disabled:w||!O,children:"Pause Project"})}),w?(0,x.jsx)(T.h_,{children:(0,x.jsxs)(T.VY,{side:"bottom",children:[(0,x.jsx)(T.Eh,{className:"radix-tooltip-arrow"}),(0,x.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,x.jsx)("span",{className:"text-xs text-scale-1200",children:"Your project is already paused"})})]})}):O?(0,x.jsx)(x.Fragment,{}):(0,x.jsx)(T.h_,{children:(0,x.jsxs)(T.VY,{side:"bottom",children:[(0,x.jsx)(T.Eh,{className:"radix-tooltip-arrow"}),(0,x.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,x.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to pause this project"})})]})})]}),(0,x.jsx)(oe.Z,{danger:!0,visible:b,title:"Pause this project?",description:"Are you sure you want to pause this project? It will not be accessible until you unpause it.",buttonLabel:"Pause project",buttonLoadingLabel:"Pausing project",onSelectCancel:y,onSelectConfirm:k})]})})),ce=ae,le=r(2674),ue=r(51664),de=(0,n.Pi)((function(e){var t=e.project,r=(0,p.oR)(),n=r.ui,s=r.app,o=(0,A.useRouter)(),a=(0,N.useState)(!1),l=a[0],u=a[1],m=(0,N.useState)(),j=m[0],v=m[1],b=t.id,g=t.ref,y=t.region,w=(0,p.FH)(d.KA.INFRA_EXECUTE,"reboot"),O=function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=2;break}return e.abrupt("return",n.setNotification({category:"error",message:"You do not have the required permissions to restart this project"}));case 2:return u(!0),e.next=5,(0,h.v_)("".concat(f.T5,"/projects/").concat(g,"/restart"),{});case 5:(t=e.sent).error?P(t.error,"project"):_();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=2;break}return e.abrupt("return",n.setNotification({category:"error",message:"You do not have the required permissions to restart this project"}));case 2:return u(!0),e.next=5,(0,h.v_)("".concat(f.T5,"/projects/").concat(g,"/restart-services"),{restartRequest:{region:y,services:["postgresql"]}});case 5:(t=e.sent).error?P(t.error,"database"):_();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e,t){n.setNotification({error:e,category:"error",message:"Unable to restart ".concat(t)}),u(!1),v(void 0)},_=function(){s.onProjectPostgrestStatusUpdated(b,"OFFLINE"),n.setNotification({category:"success",message:"Restarting server"}),o.push("/project/".concat(g)),u(!1),v(void 0)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(T.fC,{delayDuration:0,children:[(0,x.jsx)(T.xz,{children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(C.z,{type:"default",className:"rounded-r-none px-3",disabled:!w,onClick:function(){return v("project")},children:"Restart project"}),w&&(0,x.jsx)(le.ZP,{align:"end",side:"bottom",overlay:[(0,x.jsx)(le.ZP.Item,{disabled:l,onClick:function(){v("database")},children:(0,x.jsxs)("div",{className:"space-y-1",children:[(0,x.jsx)("p",{className:"block text-scale-1200",children:"Fast database reboot"}),(0,x.jsx)("p",{className:"block text-scale-1100",children:"Restarts only the database - faster but may not be able to recover from all failure modes"})]})},"database")],children:(0,x.jsx)(C.z,{type:"default",className:"rounded-l-none px-[4px] py-[5px]",icon:(0,x.jsx)(ue.Z,{}),disabled:!w})})]})}),!w&&(0,x.jsx)(T.h_,{children:(0,x.jsxs)(T.VY,{side:"bottom",children:[(0,x.jsx)(T.Eh,{className:"radix-tooltip-arrow"}),(0,x.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,x.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to restart this project"})})]})})]}),(0,x.jsx)(oe.Z,{danger:!0,visible:void 0!==j,title:"Restart ".concat(j),description:(0,x.jsxs)(x.Fragment,{children:["Are you sure you want to restart the"," ",(0,x.jsx)("span",{className:"text-scale-1200",children:j}),"? There will be a few minutes of downtime."]}),buttonLabel:"Restart",buttonLoadingLabel:"Restarting",onSelectCancel:function(){return v(void 0)},onSelectConfirm:(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("project"!==j){e.next=5;break}return e.next=3,O();case 3:e.next=8;break;case 5:if("database"!==j){e.next=8;break}return e.next=8,k();case 8:case"end":return e.stop()}}),e)})))})]})})),pe=r(82672),fe=r(47510),he=(0,n.Pi)((function(e){(0,o.Z)(e);var t=(0,z.UO)().ref,r=(0,fe.d2)().project,n=(0,pe.S2)({projectRef:t}).data,s=(null===n||void 0===n?void 0:n.tier.supabase_prod_id)===f.ev.FREE,i=K({projectRef:t}),a=i.data,c=i.isLoading,l=i.isError,d=a||{},h=d.current_app_version,j=d.latest_app_version,v=d.requires_manual_intervention,w=h===j,N=(null!==h&&void 0!==h?h:"").split("supabase-postgres-")[1],O=(null!==j&&void 0!==j?j:"").split("supabase-postgres-")[1],k=(0,p.P5)("databaseUpgrades"),P="Upgrade information:%0A\u2022 Manual intervention reason: ".concat(v);return(0,x.jsxs)("div",{children:[(0,x.jsx)(m.ph,{title:"Infrastructure",description:""}),(0,x.jsxs)(m.by,{footer:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex w-full items-center justify-between px-8 py-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm",children:"Restart server"}),(0,x.jsx)("div",{className:"max-w-[420px]",children:(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:"Your project will not be available for a few minutes."})})]}),r&&(0,x.jsx)(de,{project:r})]}),s&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"border-t border-scale-400"}),(0,x.jsxs)("div",{className:"flex w-full items-center justify-between px-8 py-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm",children:"Pause project"}),(0,x.jsx)("div",{className:"max-w-[420px]",children:(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:"Your project will not be accessible while it is paused."})})]}),r&&(0,x.jsx)(ce,{projectId:r.id,projectRef:r.ref})]})]})]}),children:[(0,x.jsx)(m.hj,{header:(0,x.jsx)(m.S0,{children:"Configuration"}),children:(0,x.jsxs)(m.B4,{loading:void 0===r,children:[(0,x.jsx)(u.Z,{readOnly:!0,disabled:!0,value:null===r||void 0===r?void 0:r.cloud_provider,label:"Cloud provider"}),(0,x.jsx)(u.Z,{readOnly:!0,disabled:!0,value:null===r||void 0===r?void 0:r.region,label:"Region"})]})}),(0,x.jsx)(m.hj,{header:(0,x.jsx)(m.S0,{children:"Postgres"}),children:(0,x.jsxs)(m.B4,{loading:c,children:[(0,x.jsx)(u.Z,{readOnly:!0,disabled:!0,value:null!==N&&void 0!==N?N:l?"Unable to fetch Postgres version of project":"",label:"Current version",actions:[w&&(0,x.jsxs)(T.fC,{delayDuration:0,children:[(0,x.jsx)(T.xz,{children:(0,x.jsx)(g.Z,{color:"green",className:"mr-1",children:"Latest"})}),(0,x.jsx)(T.h_,{children:(0,x.jsxs)(T.VY,{side:"bottom",children:[(0,x.jsx)(T.Eh,{className:"radix-tooltip-arrow"}),(0,x.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 w-[200px]"].join(" "),children:(0,x.jsx)("span",{className:"text-xs text-scale-1200",children:"Project is on the latest version of Postgres that Supabase supports"})})]})})]})]}),k&&(null===a||void 0===a?void 0:a.eligible)&&(0,x.jsx)($,{}),k&&!(null!==a&&void 0!==a&&a.eligible)&&(null===a||void 0===a?void 0:a.requires_manual_intervention)&&(0,x.jsxs)(y.Z,{icon:(0,x.jsx)(E,{className:"text-scale-1100",strokeWidth:1.5}),variant:"neutral",title:"A new version of Postgres is available for your project",children:[(0,x.jsxs)("p",{className:"mb-3",children:["Please reach out to us via our support form if you are keen to upgrade your Postgres version to the latest available (",O,")."]}),(0,x.jsx)(b(),{href:"/support/new?category=Database_unresponsive&ref=".concat(t,"&subject=").concat("Request%20for%20Postgres%20upgrade%20for%20project","&message=").concat(P),children:(0,x.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,x.jsx)(C.z,{size:"tiny",type:"default",children:"Contact support"})})})]})]})})]})]})})),me=r(2288),xe=function(e){return["projects",e,"custom-domains"]},je=["enabled"];function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){(0,w.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t){return ye.apply(this,arguments)}function ye(){return(ye=(0,i.Z)(c().mark((function e(t,r){var n,s,i,o,a,l,u,d,p;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,h.U2)("".concat(f.Q2,"/projects/").concat(s,"/custom-hostname"),{signal:r});case 5:if(!(i=e.sent).error){e.next=14;break}if(!(400===(null===(o=i.error)||void 0===o?void 0:o.code)&&(null===(a=i.error)||void 0===a||null===(l=a.message)||void 0===l?void 0:l.includes("not allowed to set up custom domain")))){e.next=10;break}return e.abrupt("return",{customDomain:null,status:"0_not_allowed"});case 10:if(!(400===(null===(u=i.error)||void 0===u?void 0:u.code)&&(null===(d=i.error)||void 0===d||null===(p=d.message)||void 0===p?void 0:p.includes("custom hostname configuration")))){e.next=13;break}return e.abrupt("return",{customDomain:null,status:"0_no_hostname_configured"});case 13:throw i.error;case 14:return e.abrupt("return",{customDomain:null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.result,status:i.status});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var we=r(96423),Ne=r(69497),Oe=r(44315),ke=r(85945),Pe=r(48228),_e=["onSuccess"];function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){(0,w.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Re(e){return De.apply(this,arguments)}function De(){return(De=(0,i.Z)(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,h.$v)("".concat(f.Q2,"/projects/").concat(r,"/custom-hostname"),{});case 5:if(!(n=e.sent).error){e.next=8;break}throw n.error;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,Y.Z)(e,_e),n=(0,ke.NL)();return(0,Pe.D)((function(e){return Re(e)}),Ze({onSuccess:function(e,r,s){return(0,i.Z)(c().mark((function i(){var o;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.projectRef,n.setQueriesData(xe(o),(function(){return{customDomain:null,status:"0_no_hostname_configured"}})),i.next=4,null===t||void 0===t?void 0:t(e,r,s);case 4:case"end":return i.stop()}}),i)})))()}},r))},Ce=(0,n.Pi)((function(e){var t=e.projectRef,r=e.customDomain,n=(0,p.oR)().ui,s=(0,N.useState)(!1),o=s[0],a=s[1],l=Ee().mutateAsync,u=function(){var e=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Project ref is required");case 2:return e.prev=2,e.next=5,l({projectRef:t});case 5:n.setNotification({category:"success",message:"Successfully deleted custom domain"}),a(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.setNotification({category:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(we.Z.Content,{children:(0,x.jsxs)("div",{className:"w-full space-y-2",children:[(0,x.jsx)("p",{className:"text-xs text-scale-1100",children:"Active custom domain:"}),(0,x.jsx)("div",{className:"flex items-center space-x-2",children:(0,x.jsxs)("code",{className:"text-lg mx-0 flex items-center space-x-2",children:[(0,x.jsx)("div",{className:"h-2 w-2 rounded-full bg-brand-900"}),(0,x.jsx)("span",{children:r.hostname})]})}),(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:"Your custom domain is currently active and is serving traffic"})]})}),(0,x.jsx)("div",{className:"w-full border-t border-scale-400"}),(0,x.jsx)(we.Z.Content,{className:"w-full",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)(b(),{href:"https://supabase.com/docs/guides/platform/custom-domains",children:(0,x.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,x.jsx)(C.z,{type:"default",icon:(0,x.jsx)(L.Z,{}),children:"Documentation"})})}),(0,x.jsx)(C.z,{type:"danger",icon:(0,x.jsx)(Oe.Z,{}),onClick:function(){return a(!0)},children:"Delete Custom Domain"})]})}),(0,x.jsx)(oe.Z,{danger:!0,visible:o,title:(0,x.jsxs)("div",{children:["Are you sure you want to delete the custom domain"," ",(0,x.jsx)("code",{className:"text-sm",children:r.hostname})," for the project?"]}),description:"Your custom domain will be deactivated. You will need to re-verify your domain if you want to use it again.",buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:function(){return a(!1)},onSelectConfirm:u})]})})),Te=r(29432),ze=r(95992),Ae=["onSuccess"];function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){(0,w.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,i.Z)(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,h.v_)("".concat(f.Q2,"/projects/").concat(r,"/custom-hostname/reverify"),{});case 5:if(!(n=e.sent).error){e.next=8;break}throw n.error;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,Y.Z)(e,Ae),n=(0,ke.NL)();return(0,Pe.D)((function(e){return Le(e)}),Fe({onSuccess:function(e,r,s){return(0,i.Z)(c().mark((function i(){var o;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.projectRef,i.next=3,n.invalidateQueries(xe(o));case 3:return i.next=5,null===t||void 0===t?void 0:t(e,r,s);case 5:case"end":return i.stop()}}),i)})))()}},r))},We=function(e){var t=e.type,r=e.name,n=e.value;return(0,x.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,x.jsx)("div",{className:"w-[50px]",children:(0,x.jsx)("p",{className:"font-mono text-base",children:t.toUpperCase()})}),(0,x.jsx)(u.Z,{readOnly:!0,copy:!0,disabled:!0,className:"input-mono flex-1",value:r,layout:"vertical"}),(0,x.jsx)(u.Z,{readOnly:!0,copy:!0,disabled:!0,className:"input-mono flex-1",value:n,layout:"vertical"})]})},Ye=(0,n.Pi)((function(e){var t,r,n,s,o,a=e.projectRef,l=e.customDomain,u=e.settings,d=(0,p.oR)().ui,f=(0,N.useState)(!1),h=f[0],m=f[1],j=qe({onSuccess:function(e){"2_initiated"===e.status&&m(!0)}}),v=j.mutate,g=j.isLoading,w=Ee(),O=w.mutateAsync,k=w.isLoading,P=null===(t=l.ssl.validation_errors)||void 0===t?void 0:t.reduce((function(e,t){return e||t.message.includes("caa_error")}),!1),_=function(){var e=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}throw new Error("Project ref is required");case 2:return e.prev=2,e.next=5,O({projectRef:a});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),d.setNotification({category:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(we.Z.Content,{className:"space-y-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("h4",{className:"text-scale-1200 mb-2",children:["Configure TXT verification for your custom domain"," ",(0,x.jsx)("code",{className:"text-sm",children:l.hostname})]}),(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:"Set the following TXT record(s) in your DNS provider, then click verify to confirm your control over the domain"}),(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:"Records which have been successfully verified will be removed from this list below."}),(0,x.jsx)("div",{className:"mt-4 mb-2",children:(0,x.jsx)(q.Z,{hideCollapse:!0,defaultVisibility:!0,icon:h?(0,x.jsx)(F.Z,{className:"text-scale-1100",strokeWidth:1.5}):(0,x.jsx)(Te.Z,{className:"text-scale-1100",strokeWidth:1.5}),title:h?"Unable to verify records from DNS provider yet.":"Please note that it may take up to 24 hours for the DNS records to propagate.",description:h?(0,x.jsxs)("div",{className:"space-y-1",children:[(0,x.jsx)("p",{children:"Do check again in a bit as it may take up to 24 hours for changes in DNS records to propagate."}),(0,x.jsxs)("p",{children:["You may also visit"," ",(0,x.jsx)(b(),{href:"https://whatsmydns.net/#TXT/".concat(l.hostname),children:(0,x.jsx)("a",{className:"text-brand-900",children:"here"})})," ","to check if your DNS has been propagated successfully before clicking verify."]})]}):(0,x.jsxs)("p",{children:["You may also visit"," ",(0,x.jsx)(b(),{href:"https://whatsmydns.net/#TXT/".concat(l.hostname),children:(0,x.jsx)("a",{className:"text-brand-900",children:"here"})})," ","to check if your DNS has been propagated successfully before clicking verify."]})})})]}),P&&(0,x.jsxs)(y.Z,{withIcon:!0,variant:"warning",title:"Certificate Authority Authentication (CAA) error",children:['Please add a CAA record allowing "digicert.com" to issue certificates for'," ",(0,x.jsx)("code",{className:"text-xs",children:l.hostname}),". For example:"," ",(0,x.jsx)("code",{className:"text-xs",children:'0 issue "digicert.com"'})]}),"validation_timed_out"===l.ssl.status?(0,x.jsx)(y.Z,{withIcon:!0,variant:"warning",title:"Validation timed out",children:'Please click "Verify" again to retry the validation of the records'}):(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsxs)("div",{className:"flex gap-4",children:[(0,x.jsx)("div",{className:"w-[50px]",children:(0,x.jsx)("p",{className:"text-scale-1100 text-sm",children:"Type"})}),(0,x.jsx)("div",{className:"text-sm grid gap-2 md:grid md:grid-cols-12 md:gap-x-4 input-mono flex-1",children:(0,x.jsx)("div",{className:"flex flex-row space-x-2 justify-between col-span-12",children:(0,x.jsx)("label",{className:"block text-scale-1100 text-sm break-all",children:"Name"})})}),(0,x.jsx)("div",{className:"text-sm grid gap-2 md:grid md:grid-cols-12 md:gap-x-4 input-mono flex-1",children:(0,x.jsx)("div",{className:"flex flex-row space-x-2 justify-between col-span-12",children:(0,x.jsx)("label",{className:"block text-scale-1100 text-sm break-all",children:"Content"})})})]}),(null===(r=l.verification_errors)||void 0===r?void 0:r.includes("custom hostname does not CNAME to this zone."))&&(0,x.jsx)(We,{type:"CNAME",name:l.hostname,value:null!==(n=null===u||void 0===u?void 0:u.autoApiService.endpoint)&&void 0!==n?n:"Loading..."}),l.ownership_verification&&(0,x.jsx)(We,{type:l.ownership_verification.type,name:l.ownership_verification.name,value:l.ownership_verification.value}),"pending_validation"===l.ssl.status&&(0,x.jsx)(We,{type:"TXT",name:null!==(s=l.ssl.txt_name)&&void 0!==s?s:"Loading...",value:null!==(o=l.ssl.txt_value)&&void 0!==o?o:"Loading..."}),"pending_deployment"===l.ssl.status&&(0,x.jsxs)("div",{className:"flex items-center justify-center space-x-2 py-8",children:[(0,x.jsx)(F.Z,{size:16,strokeWidth:1.5}),(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:"SSL certificate is being deployed. Please wait a few minutes and try again."})]})]}),(0,x.jsxs)("div",{className:"!mt-4",children:[(0,x.jsx)("p",{className:"text-sm text-scale-1000",children:"One of the records requires you to replace the CNAME record set up in the first step with a TXT record."}),(0,x.jsx)("p",{className:"text-sm text-scale-1000",children:"You'll be able to restore it back to the CNAME after the verification process has been completed."})]})]}),(0,x.jsx)("div",{className:"border-t border-scale-400"}),(0,x.jsx)(we.Z.Content,{children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)(b(),{href:"https://supabase.com/docs/guides/platform/custom-domains",children:(0,x.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,x.jsx)(C.z,{type:"default",icon:(0,x.jsx)(L.Z,{}),children:"Documentation"})})}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)(C.z,{type:"default",onClick:_,loading:k,disabled:k||g,className:"self-end",children:"Cancel"}),(0,x.jsx)(C.z,{icon:(0,x.jsx)(ze.Z,{}),onClick:function(){if(!a)throw new Error("Project ref is required");v({projectRef:a})},loading:g,disabled:k||g,className:"self-end",children:"Verify"})]})]})})]})})),Be=["onSuccess"];function Ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(r),!0).forEach((function(t){(0,w.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ge(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,i.Z)(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.projectRef){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,h.v_)("".concat(f.Q2,"/projects/").concat(r,"/custom-hostname/activate"),{});case 5:if(!(n=e.sent).error){e.next=8;break}throw n.error;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,Y.Z)(e,Be),n=(0,ke.NL)();return(0,Pe.D)((function(e){return Ge(e)}),Me({onSuccess:function(e,r,s){return(0,i.Z)(c().mark((function i(){var o;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.projectRef,i.next=3,n.invalidateQueries(xe(o));case 3:return i.next=5,null===t||void 0===t?void 0:t(e,r,s);case 5:case"end":return i.stop()}}),i)})))()}},r))},He=(0,n.Pi)((function(e){var t=e.projectRef,r=e.customDomain,n=(0,p.oR)().ui,s=(0,N.useState)(!1),o=s[0],a=s[1],l=Xe().mutateAsync,u=Ee(),d=u.mutateAsync,f=u.isLoading,h=function(){var e=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Project ref is required");case 2:return e.prev=2,e.next=5,l({projectRef:t});case 5:n.setNotification({category:"success",message:"Successfully activated custom domain"}),a(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.setNotification({category:"error",message:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Project ref is required");case 2:return e.prev=2,e.next=5,d({projectRef:t});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),n.setNotification({category:"error",message:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex flex-col items-start",children:[(0,x.jsx)(we.Z.Content,{children:(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsxs)("h4",{className:"text-scale-1200",children:["Setup complete! Press activate to enable the custom domain"," ",(0,x.jsx)("code",{className:"text-sm",children:r.hostname})," for this project."]}),(0,x.jsx)("span",{className:"text-sm text-scale-1100",children:"We recommend that you schedule a downtime window of 20 - 30 minutes for your application, as you will need to update any services that need to know about your custom domain (e.g client side code or OAuth providers)"})]})}),(0,x.jsx)("div",{className:"w-full border-t border-scale-400"}),(0,x.jsx)(we.Z.Content,{className:"w-full",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)(b(),{href:"https://supabase.com/docs/guides/platform/custom-domains",children:(0,x.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,x.jsx)(C.z,{type:"default",icon:(0,x.jsx)(L.Z,{}),children:"Documentation"})})}),(0,x.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,x.jsx)(C.z,{type:"default",onClick:m,loading:f,disabled:f,className:"self-end",children:"Cancel"}),(0,x.jsx)(C.z,{icon:(0,x.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1,stroke:"currentColor",className:"w-4 h-4",children:(0,x.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})}),disabled:f,onClick:function(){return a(!0)},className:"self-end",children:"Activate"})]})]})})]}),(0,x.jsx)(oe.Z,{size:"small",visible:o,title:(0,x.jsxs)("div",{children:["Are you sure you want to activate the custom domain"," ",(0,x.jsx)("code",{className:"text-sm",children:r.hostname})," for the project?"]}),description:"The existing Supabase subdomain will be deactivated.",buttonLabel:"Activate",buttonLoadingLabel:"Activating",onSelectCancel:function(){return a(!1)},onSelectConfirm:h})]})})),Ke=r(14633),Je=["onSuccess"];function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){(0,w.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tt(e){return rt.apply(this,arguments)}function rt(){return(rt=(0,i.Z)(c().mark((function e(t){var r,n,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.projectRef,n=t.customDomain,r){e.next=3;break}throw new Error("projectRef is required");case 3:return e.next=5,(0,h.v_)("".concat(f.Q2,"/projects/").concat(r,"/custom-hostname/initialize"),{custom_hostname:n});case 5:if(!(s=e.sent).error){e.next=8;break}throw s.error;case 8:return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,r=(0,Y.Z)(e,Je),n=(0,ke.NL)();return(0,Pe.D)((function(e){return tt(e)}),et({onSuccess:function(e,r,s){return(0,i.Z)(c().mark((function i(){var o;return c().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=r.projectRef,i.next=3,n.invalidateQueries(xe(o));case 3:return i.next=5,null===t||void 0===t?void 0:t(e,r,s);case 5:case"end":return i.stop()}}),i)})))()}},r))},st=Ke.object({domain:Ke.string().required("A value for your custom domain is required")}),it=(0,n.Pi)((function(){var e=(0,p.oR)().ui,t=(0,z.UO)().ref,r=nt().mutateAsync,n=(0,me.qP)({projectRef:t}).data,s="custom-domains-form",o=null===n||void 0===n?void 0:n.autoApiService.endpoint,a=(0,p.FH)(d.KA.UPDATE,"projects"),f=function(){var e=(0,i.Z)(c().mark((function e(t){var r,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://1.1.1.1/dns-query?name=".concat(t),{method:"GET",headers:{accept:"application/dns-json"}});case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",0===n.Status);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var n=(0,i.Z)(c().mark((function n(s){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}throw new Error("Project ref is required");case 2:return n.next=4,f(s.domain);case 4:if(n.sent){n.next=7;break}return n.abrupt("return",e.setNotification({category:"error",message:"Your CNAME record for ".concat(s.domain," cannot be found - if you've just added the CNAME record, do check back in a bit.")}));case 7:return n.prev=7,n.next=10,r({projectRef:t,customDomain:s.domain});case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(7),e.setNotification({error:n.t0,category:"error",message:n.t0.message});case 15:case"end":return n.stop()}}),n,null,[[7,12]])})));return function(e){return n.apply(this,arguments)}}();return(0,x.jsx)(l.Z,{id:s,initialValues:{domain:""},validationSchema:st,onSubmit:h,children:function(e){var t=e.isSubmitting,r=e.handleReset,n=e.values,i=e.initialValues,c=JSON.stringify(n)!==JSON.stringify(i);return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(m.by,{disabled:!a,footer:(0,x.jsx)("div",{className:"flex py-4 px-8",children:(0,x.jsx)(m.iN,{form:s,isSubmitting:t,submitText:"Add",hasChanges:c,handleReset:r,disabled:!1,helper:a?(0,x.jsx)(b(),{href:"https://supabase.com/docs/guides/platform/custom-domains",children:(0,x.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,x.jsx)(C.z,{type:"default",icon:(0,x.jsx)(L.Z,{}),children:"Documentation"})})}):"You need additional permissions to update your project's custom domain settings"})}),children:[(0,x.jsx)(m.hj,{header:(0,x.jsx)(m.S0,{children:"Add a custom domain"}),children:(0,x.jsx)(m.B4,{loading:!1,children:(0,x.jsx)(u.Z,{id:"domain",disabled:!a,className:"w-full",type:"text",name:"domain",placeholder:"subdomain.example.com"})})}),(0,x.jsx)(m.hj,{header:(0,x.jsx)(m.S0,{children:"Configure a CNAME record"}),children:(0,x.jsxs)("p",{className:"col-span-12 text-sm lg:col-span-7 leading-6",children:["Set up a CNAME record for"," ",n.domain?(0,x.jsx)("code",{className:"text-xs",children:n.domain}):"your custom domain",", resolving to"," ",o?(0,x.jsx)("code",{className:"text-xs",children:o}):"your project's API URL",", with as low a TTL as possible."]})})]})})}})})),ot=function(){return(0,x.jsxs)("div",{className:"grid grid-cols-12 gap-6 px-8 py-8",children:[(0,x.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,x.jsx)("div",{className:"h-6 w-1/3 bg-scale-1000 rounded shimmering-loader"})}),(0,x.jsx)("div",{className:"col-span-12 lg:col-span-7",children:(0,x.jsx)("div",{className:"h-[38px] w-full bg-scale-1000 rounded shimmering-loader"})})]})},at=(0,n.Pi)((function(){var e,t=(0,p.oR)().ui,r=(0,z.UO)().ref,n=null===(e=t.selectedProject)||void 0===e?void 0:e.subscription_tier,s=(0,me.qP)({projectRef:r}),i=s.isLoading,o=s.data,a=function(e){var t=e.projectRef,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.enabled,s=void 0===n||n,i=(0,Y.Z)(r,je);return(0,B.a)(xe(t),(function(e){var r=e.signal;return ge({projectRef:t},r)}),be({enabled:s&&"undefined"!==typeof t},i))}({projectRef:r}),c=a.isLoading,l=a.isError,u=a.isSuccess,d=a.data,h=i||c;return(0,x.jsxs)("section",{children:[(0,x.jsx)(m.ph,{title:"Custom Domains",description:"Present a branded experience to your users"}),h?(0,x.jsx)(we.Z,{children:(0,x.jsx)(we.Z.Content,{className:"space-y-6",children:(0,x.jsx)(ot,{})})}):l?(0,x.jsx)(we.Z,{children:(0,x.jsx)(we.Z.Content,{className:"space-y-6",children:(0,x.jsxs)("div",{className:"flex items-center justify-center space-x-2 py-8",children:[(0,x.jsx)(F.Z,{size:16,strokeWidth:1.5}),(0,x.jsxs)("p",{className:"text-sm text-scale-1100",children:["Failed to retrieve custom domain configuration. Please try again later or"," ",(0,x.jsx)(b(),{href:"/support/new?ref=".concat(r,"&category=sales"),children:(0,x.jsx)("a",{className:"underline",children:"contact support"})}),"."]})]})})}):"0_no_hostname_configured"===(null===d||void 0===d?void 0:d.status)?(0,x.jsx)(it,{}):"0_not_allowed"===(null===d||void 0===d?void 0:d.status)?(0,x.jsx)(Ne.Z,{icon:(0,x.jsx)(F.Z,{size:18,strokeWidth:1.5}),primaryText:"Custom domains are a Pro plan add-on",projectRef:r,secondaryText:n===f.ev.FREE?"To configure a custom domain for your project, please upgrade to the Pro plan with the custom domains add-on selected":"To configure a custom domain for your project, please enable the add-on"}):(0,x.jsx)(we.Z,{children:u&&(0,x.jsxs)("div",{className:"flex flex-col",children:[("1_not_started"===d.status||"2_initiated"===d.status||"3_challenge_verified"===d.status)&&(0,x.jsx)(Ye,{projectRef:r,customDomain:d.customDomain,settings:o}),"4_origin_setup_completed"===d.status&&(0,x.jsx)(He,{projectRef:r,customDomain:d.customDomain}),"5_services_reconfigured"===d.status&&(0,x.jsx)(Ce,{projectRef:r,customDomain:d.customDomain})]})})]})})),ct=r(44198),lt=r(64795),ut=function(e){var t,r=e.type,n=void 0===r?"danger":r,s=(0,A.useRouter)(),o=(0,p.oR)(),a=o.app,l=o.ui,m=l.selectedProject,j=null===m||void 0===m?void 0:m.ref,v=(null!==(t=null===m||void 0===m?void 0:m.subscription_tier)&&void 0!==t?t:f.ev.FREE)===f.ev.FREE,b=(0,N.useState)(!1),g=b[0],y=b[1],w=(0,N.useState)(!1),O=w[0],k=w[1],P=(0,N.useState)([]),_=P[0],S=P[1],Z=(0,N.useState)(""),R=Z[0],D=Z[1];(0,N.useEffect)((function(){g&&(S([]),D(""))}),[g]);var E=(0,p.FH)(d.KA.UPDATE,"projects"),z=function(){O||y(!g)};function U(){return(U=(0,i.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==m){e.next=2;break}return e.abrupt("return");case 2:if(v||0!==_.length){e.next=4;break}return e.abrupt("return",l.setNotification({category:"error",duration:4e3,message:"Please select at least one reason for deleting your project"}));case 4:return k(!0),e.prev=5,e.next=8,(0,h.$v)("".concat(f.T5,"/projects/").concat(j));case 8:if(!(t=e.sent).error){e.next=11;break}throw t.error;case 11:a.onProjectDeleted(t),l.setNotification({category:"success",message:"Successfully deleted ".concat(m.name)}),s.push("/projects"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(5),k(!1),l.setNotification({category:"error",message:"Failed to delete project ".concat(m.name,": ").concat(e.t0.message)});case 20:if(v){e.next=26;break}return e.next=23,(0,h.v_)("".concat(f.T5,"/feedback/downgrade"),{projectRef:j,reasons:_.reduce((function(e,t){return"".concat(e,"- ").concat(t,"\n")}),""),additionalFeedback:R,exitAction:"delete"});case 23:if(!(r=e.sent).error){e.next=26;break}throw r.error;case 26:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(T.fC,{delayDuration:0,children:[(0,x.jsx)(T.xz,{children:(0,x.jsx)(C.z,{onClick:z,type:n,disabled:!E,children:"Delete project"})}),!E&&(0,x.jsx)(T.h_,{children:(0,x.jsxs)(T.VY,{side:"bottom",children:[(0,x.jsx)(T.Eh,{className:"radix-tooltip-arrow"}),(0,x.jsx)("div",{className:["rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200 "].join(" "),children:(0,x.jsx)("span",{className:"text-xs text-scale-1200",children:"You need additional permissions to delete this project"})})]})})]}),(0,x.jsx)(ct.Z,{visible:g,loading:O,size:v?"small":"xlarge",title:"Confirm deletion of ".concat(null===m||void 0===m?void 0:m.name),alert:v?"This action cannot be undone.":"This will permanently delete the ".concat(null===m||void 0===m?void 0:m.name," project and all of its data, and cannot be undone"),text:v?"This will permanently delete the ".concat(null===m||void 0===m?void 0:m.name," project and all of its data."):void 0,confirmPlaceholder:"Type the project name in here",confirmString:(null===m||void 0===m?void 0:m.name)||"",confirmLabel:"I understand, delete this project",onConfirm:function(){return U.apply(this,arguments)},onCancel:z,children:!v&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"space-y-1",children:[(0,x.jsx)("h4",{className:"text-base",children:"We're sad that you're leaving."}),(0,x.jsx)("p",{className:"text-sm text-scale-1100",children:"We always strive to improve Supabase as much as we can. Please let us know the reasons you are deleting your project so that we can improve in the future."})]}),(0,x.jsxs)("div",{className:"space-y-4 pt-4",children:[(0,x.jsx)("div",{className:"flex flex-wrap gap-2","data-toggle":"buttons",children:lt.Y.map((function(e){var t=_.find((function(t){return t===e}));return(0,x.jsxs)("label",{className:["flex cursor-pointer items-center space-x-2 rounded-md py-1","pl-2 pr-3 text-center text-sm shadow-sm transition-all duration-100","".concat(t?" bg-scale-1200 text-scale-100 opacity-100 hover:bg-opacity-75":" bg-scale-700 text-scale-1200 opacity-25 hover:opacity-50")].join(" "),children:[(0,x.jsx)("input",{type:"checkbox",name:"options",value:e,className:"hidden",onClick:function(e){return function(e){var t=void 0===_.find((function(t){return t===e}))?_.concat([e]):_.filter((function(t){return t!==e}));S(t)}(e.target.value)}}),(0,x.jsx)("div",{children:e})]},e)}))}),(0,x.jsx)("div",{className:"text-area-text-sm",children:(0,x.jsx)(u.Z.TextArea,{name:"message",label:"Anything else that we can improve on?",rows:3,value:R,onChange:function(e){return D(e.target.value)}})})]})]})})]})},dt=function(e){return(0,o.Z)(e),void 0===(0,p.oR)().ui.selectedProject?(0,x.jsx)(x.Fragment,{}):(0,x.jsxs)("section",{children:[(0,x.jsx)(m.ph,{title:"Delete Project",description:""}),(0,x.jsx)(we.Z,{children:(0,x.jsx)(we.Z.Content,{children:(0,x.jsx)(y.Z,{variant:"danger",withIcon:!0,title:"Deleting this project will also remove your database.",children:(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-4 block",children:"Make sure you have made a backup if you want to keep your data."}),(0,x.jsx)(ut,{})]})})})})]})},pt=function(){return(0,x.jsxs)("div",{className:"1xl:px-28 mx-auto flex flex-col gap-10 px-5 py-6 lg:px-16 xl:px-24 2xl:px-32 ",children:[(0,x.jsx)(j,{}),(0,x.jsx)(he,{}),(0,x.jsx)(at,{}),(0,x.jsx)(dt,{})]})};pt.getLayout=function(e){return(0,x.jsx)(s.dU,{title:"General",children:e})};var ft=(0,n.Pi)(pt)},29324:function(e,t,r){"use strict";var n=r(90849),s=(r(27378),r(87066)),i=r(12163),o=r(24246);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}t.Z=function(e){return(0,o.jsx)(i.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({icon:s.Z},e))}},3018:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/general",function(){return r(67969)}])},87066:function(e,t,r){"use strict";var n=r(27378),s=r(23615),i=r.n(s);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var c=(0,n.forwardRef)((function(e,t){var r=e.color,s=void 0===r?"currentColor":r,i=e.size,c=void 0===i?24:i,l=a(e,["color","size"]);return n.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),n.createElement("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}))}));c.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},c.displayName="Zap",t.Z=c}},function(e){e.O(0,[7930,1188,6792,4633,2056,5286,9774,2888,179],(function(){return t=3018,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=general-60d0e32e2b14f86f.js.map