(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8464],{52133:function(e,t,i){"use strict";var a=i(27378),s=i(2674),n=i(47314),r=i(51664),o=i(27693),d=i.n(o),l=i(20796),c=i(24246);t.Z=function(e){var t=e.onChange,i=e.value,o=e.options,u=e.loading,m=e.currentBillingPeriodStart,p=(0,a.useState)(i),h=p[0],x=p[1];(0,a.useEffect)((function(){b(i)}),[u]);var v=d()().startOf("month").format(l.zT),f=d()().add(1,"month").startOf("month").format(l.zT),g=d()().format(l.zT);function b(e){switch(x(e),e){case"currentBillingCycle":t({period_start:{date:d().unix(m).format(l.zT),time_period:"1d"},period_end:{date:d().unix(m).add(1,"month").format(l.zT),time_period:"today"},interval:"1d"});break;case"previousBillingCycle":t({period_start:{date:d().unix(m).subtract(1,"month").format(l.zT),time_period:"1d"},period_end:{date:d().unix(m).format(l.zT),time_period:"today"},interval:"1d"});break;case"1d":t({period_start:{date:d()().subtract(24,"hour").format(l.zT),time_period:"1d"},period_end:{date:g,time_period:"today"},interval:"1h"});break;case"3h":t({period_start:{date:d()().subtract(3,"hour").format(l.zT),time_period:"3h"},period_end:{date:g,time_period:"today"},interval:"5m"});break;case"1h":t({period_start:{date:d()().subtract(1,"hour").format(l.zT),time_period:"1h"},period_end:{date:g,time_period:"today"},interval:"5m"});break;case"7d":t({period_start:{date:d()().subtract(7,"day").format(l.zT),time_period:"7d"},period_end:{date:g,time_period:"today"},interval:"1d"});break;case"30d":t({period_start:{date:d()().subtract(30,"day").format(l.zT),time_period:"30d"},period_end:{date:g,time_period:"today"},interval:"1d"});break;case"60d":t({period_start:{date:d()().subtract(60,"day").format(l.zT),time_period:"60d"},period_end:{date:g,time_period:"today"},interval:"3d"});break;case"startMonth":t({period_start:{date:v,time_period:"startMonth"},period_end:{date:f,time_period:"endMonth"},interval:"1d"});break;default:console.warn("Unknown period encountered: ".concat(e))}}return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.ZP,{side:"bottom",align:"start",overlay:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.ZP.RadioGroup,{value:h,onChange:function(e){return b(e)},children:o.map((function(e){return(0,c.jsx)(s.ZP.Radio,{value:e.key,children:e.label},e.key)}))})}),children:(0,c.jsx)(n.z,{as:"span",type:"default",iconRight:(0,c.jsx)(r.Z,{}),children:h&&o.find((function(e){return e.key==h})).label})})})}},39992:function(e,t,i){"use strict";i.d(t,{PR:function(){return b}});var a=i(90849),s=i(90089),n=i(55732),r=i(34707),o=i.n(r),d=i(36492),l=i(27693),c=i.n(l),u=i(14919),m=i(20796),p=(i(27378),i(36891)),h=["enabled"];function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){(0,a.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function f(e,t){return g.apply(this,arguments)}function g(){return(g=(0,n.Z)(o().mark((function e(t,i){var a,s,n,r,d,l,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.projectRef,s=t.attribute,n=t.startDate,r=t.endDate,d=t.interval,l=void 0===d?"1d":d,a){e.next=3;break}throw new Error("Project ref is required");case 3:if(s){e.next=5;break}throw new Error("Attribute is required");case 5:if(n){e.next=7;break}throw new Error("Start date is required");case 7:if(r){e.next=9;break}throw new Error("End date is required");case 9:return e.next=11,(0,u.U2)("".concat(m.T5,"/projects/").concat(a,"/infra-monitoring?attribute=").concat(s,"&startDate=").concat(encodeURIComponent(n),"&endDate=").concat(encodeURIComponent(r),"&interval=").concat(l),{signal:i});case 11:if(!(c=e.sent).error){e.next=14;break}throw c.error;case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=function(e){var t=e.projectRef,i=e.attribute,n=e.startDate,r=e.endDate,o=e.interval,l=void 0===o?"1d":o,u=e.dateFormat,m=void 0===u?"DD MMM":u,x=e.modifier,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},b=g.enabled,j=void 0===b||b,y=(0,s.Z)(g,h);return(0,d.a)(p.d.infraMonitoring(t,{attribute:i,startDate:n,endDate:r,interval:l}),(function(e){var a=e.signal;return f({projectRef:t,attribute:i,startDate:n,endDate:r,interval:l},a)}),v({enabled:j&&"undefined"!==typeof t&&"undefined"!==typeof i&&"undefined"!==typeof n&&"undefined"!==typeof r,select:function(e){return v(v({},e),{},{data:e.data.map((function(e){var t;return v(v({},e),{},(t={},(0,a.Z)(t,i,void 0!==x?x(Number(e[i])):Number(e[i])),(0,a.Z)(t,"periodStartFormatted",c()(e.period_start).format(m)),t))}))})}},y))}},36891:function(e,t,i){"use strict";i.d(t,{d:function(){return a}});var a={functionsInvStats:function(e,t){return["projects",e,"functions-inv-stats",{interval:t.interval,functionId:t.functionId}]},dailyStats:function(e,t){return["projects",e,"daily-stats",{attribute:t.attribute,startDate:t.startDate,endDate:t.endDate,interval:t.interval}]},infraMonitoring:function(e,t){return["projects",e,"infra-monitoring",{attribute:t.attribute,startDate:t.startDate,endDate:t.endDate,interval:t.interval}]},usageApiCounts:function(e,t){return["projects",e,"usage.api-counts",t]}}},35605:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Ee}});var a=i(44285),s=i(27693),n=i.n(s),r=i(43659),o=i(27378),d=i(17634),l=i(72853),c=i(21063),u=i(27102),m=i(82672),p=i(20796),h=i(42753),x=i(97588),v=i(52133),f=i(2382),g=i(90849),b=i(79894),j=i.n(b),y=i(86677),_=i(98213),N=i(68043),w=i(33769),k=i(84364),D=i(47314),z=i(65961),R=i(19248),S=i(11597),Z=i(49239),O=i(24903),P=i(39466),E=i(51452),L=i(33114),M=i(64795),I=i(47510),B=i(83282),T=i(45322),C=i(64368),Y=i(24246),F=function(e){var t,i,a=e.projectRef,s=(0,u.oR)().ui,n=(0,T.DK)({projectRef:a}),r=n.data,d=n.error,c=n.isLoading,m=(0,y.useRouter)(),h=(0,I.d2)().project,x=(0,B.VP)({projectRef:null===h||void 0===h?void 0:h.ref,connectionString:null===h||void 0===h?void 0:h.connectionString}).data,v=(0,u.P5)("overusageBadge"),f=(0,u.FH)(N.KA.BILLING_WRITE,"stripe.subscriptions"),b=null===(t=s.selectedProject)||void 0===t?void 0:t.subscription_tier,F=b===p.ev.PAYG||b===p.ev.TEAM||b===p.ev.ENTERPRISE,U=(0,C.O)(r),A=void 0!==b&&!F,W=(i={},(0,g.Z)(i,p.ev.FREE,"Free"),(0,g.Z)(i,p.ev.PRO,"Pro"),(0,g.Z)(i,p.ev.PAYG,"Pro"),(0,g.Z)(i,p.ev.TEAM,"Team"),(0,g.Z)(i,p.ev.ENTERPRISE,"Enterprise"),i),q=b&&W[b]||"current";if((0,o.useEffect)((function(){var e;d&&s.setNotification({category:"error",message:"Failed to get project's usage data: ".concat(null!==(e=null===d||void 0===d?void 0:d.message)&&void 0!==e?e:"unknown")})}),[d]),!c&&d)return(0,Y.jsx)(L.Z,{hideCollapse:!0,defaultVisibility:!0,icon:(0,Y.jsx)(w.Z,{strokeWidth:2}),title:"There was an issue loading the usage details of your project"});var G=b!==p.ev.FREE,K={db_size:G?(0,Y.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Y.jsxs)("div",{className:"flex flex-row space-x-4 text-scale-1000",children:[(null===r||void 0===r?void 0:r.disk_volume_size_gb)&&(0,Y.jsxs)("span",{children:["Disk Size: ",r.disk_volume_size_gb," GB"]}),(0,Y.jsx)(k.Z,{children:"Auto-Scaling"})]}),(0,Y.jsx)(D.z,{type:"default",icon:(0,Y.jsx)(z.Z,{size:14,strokeWidth:1.5}),children:(0,Y.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/platform/database-usage",children:"What is disk size?"})})]}):null};return(0,Y.jsx)(l.Z,{active:c,children:r&&(0,Y.jsxs)("div",{children:[U.length>0&&A&&v&&(0,Y.jsx)("div",{className:"mb-10",children:(0,Y.jsx)(L.Z,{hideCollapse:!0,defaultVisibility:!0,icon:(0,Y.jsx)(w.Z,{strokeWidth:2}),title:"You are exceeding your plans quota",description:(0,Y.jsx)("div",{className:"p-1",children:b===p.ev.FREE?(0,Y.jsxs)("div",{children:[(0,Y.jsx)("p",{children:"Your project is currently on the Free tier - upgrade to the Pro tier for a greatly increased quota and continue to scale."}),(0,Y.jsxs)("p",{className:"mb-4",children:["See"," ",(0,Y.jsx)(j(),{href:"https://supabase.com/pricing",passHref:!0,children:(0,Y.jsx)("a",{className:"text-brand-900",children:"pricing page"})})," ","for a full breakdown of available plans."]}),(0,Y.jsx)(j(),{href:"/project/".concat(a,"/settings/billing/update"),children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{children:"Upgrade to Pro"})})})]}):(0,Y.jsxs)("div",{className:"space-y-4",children:[(0,Y.jsx)("p",{children:"By default, Pro projects have spend caps to control costs. When enabled, usage is limited to the plan's quota, with restrictions when limits are exceeded. To scale beyond Pro limits without restrictions, disable the spend cap and pay for over-usage beyond the quota."}),(0,Y.jsx)(j(),{href:"/project/".concat(a,"/settings/billing/update/pro"),children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{children:"Configure Spend Cap"})})})]})})})}),M.K.map((function(e){return(0,Y.jsxs)("div",{className:["mb-8 overflow-hidden rounded border","border-panel-border-light dark:border-panel-border-dark"].join(" "),children:[(0,Y.jsxs)("table",{className:"w-full bg-panel-body-light dark:bg-panel-body-dark",children:[(0,Y.jsx)("thead",{className:"bg-panel-header-light dark:bg-panel-header-dark",children:(0,Y.jsx)("tr",{className:"overflow-hidden rounded",children:(0,Y.jsx)("th",{className:"w-1/4 px-6 py-3 text-left",children:(0,Y.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Y.jsx)("div",{className:["flex h-8 w-8 items-center justify-center","rounded bg-scale-500 dark:bg-white"].join(" "),children:e.icon}),(0,Y.jsx)("h5",{className:"mb-0",children:e.title})]})})})}),void 0===r?(0,Y.jsx)("div",{className:"px-4 pt-1 pb-4 w-96",children:(0,Y.jsx)(E.Z,{})}):(0,Y.jsx)("tbody",{children:e.features.map((function(e){var t,i,n=r[e.key],o=n.usage||0,d=o/n.limit,l=d>=p.wc,c=A&&d>=1,u=n.available_in_plan;return i=u?A?(0,Y.jsx)(P.Z,{type:"horizontal",barClass:"".concat(c?"bg-red-900":l?"bg-yellow-900":"bg-brand-900"),value:o,max:n.limit,labelBottom:"bytes"===e.units?(0,O.td)(o):o.toLocaleString(),labelTop:"bytes"===e.units?(0,O.td)(n.limit):n.limit.toLocaleString()}):(0,Y.jsx)("span",{children:"bytes"===e.units?(0,O.td)(o):o}):(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsxs)("span",{children:["Not included in ",q," tier"]}),f&&(0,Y.jsx)(D.z,{size:"tiny",onClick:function(){return m.push("/project/".concat(a,"/settings/billing/update"))},children:"Upgrade to Pro"})]}),[(0,Y.jsxs)("tr",{className:"border-t border-panel-border-light dark:border-panel-border-dark",children:[(0,Y.jsxs)("td",{className:"px-6 py-3 text-sm whitespace-nowrap text-scale-1200",children:[e.title,e.tooltip&&(0,Y.jsxs)(_.fC,{delayDuration:0,children:[(0,Y.jsx)(_.xz,{children:(0,Y.jsx)(R.Z,{className:"ml-2",size:14,strokeWidth:2})}),(0,Y.jsx)(_.h_,{children:(0,Y.jsxs)(_.VY,{side:"bottom",children:[(0,Y.jsx)(_.Eh,{className:"radix-tooltip-arrow"}),(0,Y.jsx)("div",{className:["max-w-md","flex items-center justify-center","rounded bg-scale-100 py-1 px-2 leading-none shadow","border border-scale-200"].join(" "),children:(0,Y.jsx)("span",{className:"text-xs text-center text-scale-1200",children:e.tooltip})})]})})]})]}),void 0!==(null===(t=s.selectedProject)||void 0===t?void 0:t.subscription_tier)&&(0,Y.jsxs)(Y.Fragment,{children:[A&&(0,Y.jsx)("td",{className:"hidden w-1/5 p-3 text-sm whitespace-nowrap text-scale-1200 lg:table-cell",children:u?(0,Y.jsxs)(Y.Fragment,{children:[(100*d).toFixed(2)," %"]}):(0,Y.jsx)(Y.Fragment,{children:"-"})}),(0,Y.jsx)("td",{className:"px-6 py-3 text-sm text-scale-1200",children:i})]})]},e.title),K[e.key]&&(0,Y.jsx)("tr",{children:(0,Y.jsx)("td",{className:"whitespace-nowrap px-6 py-3 text-sm text-scale-1200",colSpan:3,children:K[e.key]})},"".concat(e.title,"-footnote"))]}))})]}),x&&"Database"===e.title&&(0,Y.jsx)("div",{className:"p-6",children:(0,Y.jsxs)(S.Z,{title:"Database is in read-only mode",variant:"danger",withIcon:!0,children:[(0,Y.jsx)("p",{children:G?(0,Y.jsxs)(Y.Fragment,{children:["Your disk has reached 95% capacity and has entered"," ",(0,Y.jsx)("a",{href:"https://supabase.com/docs/guides/platform/database-usage#paid-tier-disk-auto-scaling",className:"underline transition hover:text-scale-1200",children:"read-only mode"}),"."]}):(0,Y.jsxs)(Y.Fragment,{children:["You have exceeded the 500mb Database size limit and your project is now in"," ",(0,Y.jsx)("a",{href:"https://supabase.com/docs/guides/platform/database-usage#free-tier-project-read-only-mode",className:"underline transition hover:text-scale-1200",children:"read-only mode"}),"."]})}),G?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("p",{children:["For Pro and Enterprise projects,"," ",(0,Y.jsx)("a",{href:"https://supabase.com/docs/guides/platform/database-usage#paid-tier-disk-auto-scaling",className:"underline transition hover:text-scale-1200",children:"Disk Size expands automatically"})," ","when it reaches 90% capacity, but can only occur once every six hours. If the disk size has already expanded and then reaches 95% capacity within 6 hours, then"," ",(0,Y.jsx)("a",{href:"https://supabase.com/docs/guides/platform/database-usage#paid-tier-project-read-only-mode",className:"underline transition hover:text-scale-1200",children:"your disk will enter read-only mode"})," ","until it can resize again after 6 hours."]}),(0,Y.jsxs)("p",{className:"mt-2",children:["If you require help or need your disk changed to read/write mode so you can delete data,"," ",(0,Y.jsx)(j(),{href:"/support/new?ref=".concat(a||"","&category=Database_unresponsive&Subject=Read%20only%20mode%20issue"),children:(0,Y.jsx)("a",{className:"underline transition hover:text-scale-1200",children:"you can contact the support team"})}),"."]})]}):(0,Y.jsxs)("p",{children:["You can either"," ",(0,Y.jsx)("a",{href:"https://supabase.com/docs/guides/platform/database-usage#increasing-available-disk-size",className:"underline transition hover:text-scale-1200",children:"reduce your disk usage below 500mb"})," ","or"," ",(0,Y.jsx)(j(),{href:"/project/".concat(a||"","/settings/billing/subscription"),children:(0,Y.jsx)("a",{className:"underline transition hover:text-scale-1200",children:"upgrade your project"})}),"."]}),G?(0,Y.jsx)(D.z,{type:"danger",icon:(0,Y.jsx)(Z.Z,{size:14,strokeWidth:1.5}),className:"mt-3",children:(0,Y.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/platform/database-usage#database-storage-management",children:"Database storage management docs"})}):(0,Y.jsx)(D.z,{type:"danger",className:"mt-3",children:(0,Y.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://supabase.com/docs/guides/platform/database-usage#database-storage-management",children:"Upgrade this project"})})]})})]},e.title)}))]})})},U=i(86010),A=i(22917),W=i(58728),q=i(14971),G=i(44602),K=i(90089),V=i(55732),H=i(34707),Q=i.n(H),X=i(36492),$=i(14919),J=i(36891),ee=["enabled"];function te(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function ie(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?te(Object(i),!0).forEach((function(t){(0,g.Z)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):te(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function ae(e,t){return se.apply(this,arguments)}function se(){return(se=(0,V.Z)(Q().mark((function e(t,i){var a,s,n,r,o,d,l;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.projectRef,s=t.attribute,n=t.startDate,r=t.endDate,o=t.interval,d=void 0===o?"1d":o,a){e.next=3;break}throw new Error("Project ref is required");case 3:if(s){e.next=5;break}throw new Error("Attribute is required");case 5:if(n){e.next=7;break}throw new Error("Start date is required");case 7:if(r){e.next=9;break}throw new Error("Start date is required");case 9:return e.next=11,(0,$.U2)("".concat(p.T5,"/projects/").concat(a,"/daily-stats?attribute=").concat(s,"&startDate=").concat(encodeURIComponent(n),"&endDate=").concat(encodeURIComponent(r),"&interval=").concat(d),{signal:i});case 11:if(!(l=e.sent).error){e.next=14;break}throw l.error;case 14:return e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=function(e){var t=e.projectRef,i=e.attribute,a=e.startDate,s=e.endDate,r=e.interval,o=void 0===r?"1d":r,d=e.dateFormat,l=void 0===d?"DD MMM":d,c=e.modifier,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=u.enabled,p=void 0===m||m,h=(0,K.Z)(u,ee);return(0,X.a)(J.d.dailyStats(t,{attribute:i,startDate:a,endDate:s,interval:o}),(function(e){var n=e.signal;return ae({projectRef:t,attribute:i,startDate:a,endDate:s,interval:o},n)}),ie({enabled:p&&"undefined"!==typeof t&&"undefined"!==typeof i&&"undefined"!==typeof a&&"undefined"!==typeof s,select:function(e){if(void 0===e.data[0].id){var t=n()(s).diff(n()(a),"days"),r=new Array(t).fill(0).map((function(e,t){return(0,g.Z)({loopId:t,period_start:n()(a).add(t,"day").format("DD MMM YYYY"),periodStartFormatted:n()(a).add(t,"day").format(l)},i,0)}));return ie(ie({},e),{},{data:r,hasNoData:!0})}return ie(ie({},e),{},{hasNoData:!1,data:e.data.map((function(e){var t;return ie(ie({},e),{},(t={},(0,g.Z)(t,i,void 0!==c?c(Number(e[i])):Number(e[i])),(0,g.Z)(t,"periodStartFormatted",n()(e.period_start).format(l)),t))}))})}},h))},re=i(64968),oe=.8,de=i(29009),le=i(5505),ce=i(14195),ue=i(3023),me=i(75358),pe=i(14888),he=i(87226),xe=i(43815),ve=i(4545),fe="NORMAL",ge="APPROACHING",be="EXCEEDED",je=[{key:"infra",name:"Infrastructure",description:"Usage statistics related to your Postgres server",attributes:[{anchor:"cpu",key:"cpu_usage",attribute:"cpu_usage",name:"CPU",unit:"percentage",description:"CPU usage of your server",chartDescription:"The data shown here is refreshed over a period of 24 hours."},{anchor:"ram",key:"ram_usage",attribute:"ram_usage",name:"Memory",unit:"percentage",description:"Memory usage of your server",chartDescription:"The data shown here is refreshed over a period of 24 hours."},{anchor:"disk_io_budget",key:"disk_io_budget",attribute:"disk_io_budget",name:"Disk IO bandwidth",unit:"percentage",docsUrl:"https://supabase.com/docs/guides/platform/compute-add-ons#disk-io-bandwidth",description:"SSD Disks are attached to your servers and the disk performance of your workload is determined by the Disk IO bandwidth of this connection.",chartDescription:"The amount of remaining bandwidth resets at the beginning of each day, and the data shown here is refreshed over a period of 24 hours."}]},{key:"bandwidth",name:"Bandwidth",description:"Amount of data transmitted over network connections",attributes:[{anchor:"dbEgress",key:"db_egress",attribute:"total_egress_modified",name:"Database egress",unit:"bytes",description:"Contains any outgoing traffic (egress) from your database",chartDescription:"Billing is based on the total sum of egress in GB throughout your billing period. The data shown here is refreshed over a period of 24 hours."},{anchor:"storageEgress",key:"storage_egress",attribute:"total_storage_egress",name:"Storage egress",unit:"bytes",description:"Contains any outgoing traffic (egress) from your storage buckets (only download operations are counted). We currently do not differentiate between no-cache and cache hits.",chartDescription:"Billing is based on the total amount of egress in GB throughout your billing period. The data shown here is refreshed over a period of 24 hours."}]},{key:"sizeCount",name:"Size & Counts",description:"Amount of resources your project is consuming",attributes:[{anchor:"dbSize",key:"db_size",attribute:"total_db_size_bytes",name:"Database size",unit:"bytes",description:"Size of your project's database",docsUrl:"https://supabase.com/docs/guides/platform/database-usage",chartDescription:"Billing is based on the average daily database size in GB throughout the billing period. The data shown here is refreshed over a period of 24 hours."},{anchor:"storageSize",key:"storage_size",attribute:"total_storage_size_bytes",name:"Storage size",unit:"bytes",description:"Sum of all objects in your storage buckets",chartDescription:"Billing is based on the average size in GB throughout your billing period. The data shown here is refreshed over a period of 24 hours."},{anchor:"funcCount",key:"func_count",attribute:"total_func_count",name:"Edge function count",unit:"absolute",description:"Number of serverless functions in your project",chartDescription:"Billing is based on the maximum amount of functions at any point in time throughout your billing period. The data shown here is refreshed over a period of 24 hours."}]},{key:"activity",name:"Activity",description:"Usage statistics that reflect the activity of your project",attributes:[{anchor:"mau",key:"monthly_active_users",attribute:"total_auth_billing_period_mau",name:"Monthly active users",unit:"absolute",description:"The amount of distinct users requesting your API throughout the billing period.",chartDescription:"The data shown here is refreshed over a period of 24 hours and resets at the beginning of every billing period."},{anchor:"mauSso",key:"monthly_active_sso_users",attribute:"total_auth_billing_period_sso_mau",name:"Monthly active single sign-on users",unit:"absolute",description:"The amount of distinct Single Sign-On users requesting your API throughout the billing period.",chartDescription:"The data shown here is refreshed over a period of 24 hours and resets at the beginning of every billing period."},{anchor:"storageImageTransformations",key:"storage_image_render_count",attribute:"total_storage_image_render_count",name:"Storage image transformations",unit:"absolute",description:"We distinctly count all images that were transformed in the billing period, ignoring any transformations.\nIf you transform one image with different transformations, it only counts as one. We only count the unique (origin) images being transformed.",chartDescription:"The data shown here is refreshed over a period of 24 hours."},{anchor:"functionInvocations",key:"func_invocations",attribute:"total_func_invocations",name:"Edge function invocations",unit:"absolute",description:"Every single serverless function invocation independent of response status is counted.",chartDescription:"Billing is based on the sum of all invocations throughout your billing period. The data shown here is refreshed over a period of 24 hours."},{anchor:"realtimeMessageCount",key:"realtime_message_count",attribute:"total_realtime_message_count",name:"Realtime message count",unit:"absolute",description:"Total number of realtime messages sent",chartDescription:"Billing is based on the total amount of messages throughout your billing period. The data shown here is refreshed over a period of 24 hours."},{anchor:"realtimePeakConnection",key:"realtime_peak_connection",attribute:"total_realtime_peak_connection",name:"Realtime peak connections",unit:"absolute",description:"Total number of successful connections (not connection attempts)",chartDescription:"Billing is based on the maximum amount of concurrent peak connections throughout your billing period."}]}],ye={addon_instance_micro:{maxBandwidth:2606,baseBandwidth:87},addon_instance_small:{maxBandwidth:2606,baseBandwidth:174},addon_instance_medium:{maxBandwidth:2606,baseBandwidth:347},addon_instance_large:{maxBandwidth:4750,baseBandwidth:630},addon_instance_xlarge:{maxBandwidth:4750,baseBandwidth:1188},addon_instance_xxlarge:{maxBandwidth:4750,baseBandwidth:2375},addon_instance_4xlarge:{maxBandwidth:4750,baseBandwidth:4750},addon_instance_8xlarge:{maxBandwidth:9500,baseBandwidth:9500},addon_instance_12xlarge:{maxBandwidth:14250,baseBandwidth:14250},addon_instance_16xlarge:{maxBandwidth:19e3,baseBandwidth:19e3}},_e=function(e){var t=e.data,i=e.name,a=e.attribute,s=e.unit,r=e.hasQuota,o=void 0!==r&&r,d=e.yLimit,l=e.yLeftMargin,c=void 0===l?10:l,u=e.yFormatter,m=e.quotaWarningType,p=0,h=1.3333333333333333*(null!==d&&void 0!==d?d:0),x="warning"===(void 0===m?"warning":m)?"fill-amber-900":"fill-red-900",v=[p,null!==d&&void 0!==d?d:0],f=void 0!==d&&o?[p,.25*(h-p),.5*(h-p),.75*(h-p),h].map((function(e){return Math.ceil(e)})):void 0;return(0,Y.jsx)("div",{className:"w-full h-[200px]",children:(0,Y.jsx)(de.h,{width:"100%",height:200,children:(0,Y.jsxs)(le.c,{data:t,margin:{top:0,right:0,left:c,bottom:0},children:[(0,Y.jsx)(ce.q,{vertical:!1,strokeDasharray:"3 3",className:"stroke-scale-800"}),(0,Y.jsx)(ue.K,{dataKey:"periodStartFormatted"}),(0,Y.jsx)(me.B,{width:28,axisLine:!1,tickLine:{stroke:"none"},domain:v,ticks:f,tickFormatter:u}),(0,Y.jsx)(pe.u,{content:function(e){var t=e.active,r=e.payload;if(t&&r&&r.length){var o=n()(r[0].payload.period_start),d="percentage"===s?Number(r[0].value).toFixed(2):Number(r[0].value);return(0,Y.jsxs)("div",{className:"w-[170px] border bg-scale-300 rounded-md px-2 py-2",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"disk_io_budget"===a?"Remaining IO budget:":"".concat(i,":")}),o.startOf("day").isAfter(n()().startOf("day"))?(0,Y.jsx)("p",{className:"text-scale-1000 text-lg",children:"No data yet"}):(0,Y.jsx)("p",{className:"text-xl",children:void 0!==u?u(d):d}),(0,Y.jsx)("p",{className:"text-xs text-scale-1100 mt-1",children:o.format("DD MMM YYYY")})]})}return null}}),(0,Y.jsx)(he.$,{dataKey:a,children:t.map((function(e){return(0,Y.jsx)(xe.b,{className:void 0!==d&&Number(e[a])>=d&&o?x:"fill-scale-1200"},"".concat(e.period_start))}))}),o&&d&&(0,Y.jsx)(ve.d,{y:d,label:function(e){return(0,Y.jsx)("foreignObject",{x:e.viewBox.x+30,y:e.viewBox.y-10,width:200,height:24,children:(0,Y.jsx)("div",{className:"text-[0.7rem] font-bold text-scale-1200 bg-scale-100 w-fit p-1.5 py-0.5 rounded-md",children:"PLAN QUOTA"})})}})]})})})},Ne=function(e){var t=e.section,i=e.includedInPlan,a=e.lastKnownValue,s=e.children,n=t.name,r=t.description,o=t.docsUrl;return(0,Y.jsx)("div",{className:"border-b",children:(0,Y.jsx)("div",{className:"1xl:px-28 mx-auto flex flex-col gap-10 px-5 lg:px-16 2xl:px-32 py-16",children:(0,Y.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,Y.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,Y.jsxs)("div",{className:"sticky top-16 space-y-6",children:[(0,Y.jsxs)("div",{className:"space-y-1",children:[(0,Y.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Y.jsx)("p",{className:"text-base capitalize",children:n}),!1===i&&(0,Y.jsx)(k.Z,{color:"gray",children:"Not included"})]}),r.split("\n").map((function(e,t){return(0,Y.jsx)("p",{className:"text-sm text-scale-1000",children:e},"desc-".concat(t))}))]}),void 0!==o&&(0,Y.jsxs)("div",{children:[(0,Y.jsx)("p",{className:"text-sm text-scale-1100 mb-2",children:"More information"}),(0,Y.jsx)(j(),{href:o,children:(0,Y.jsx)("a",{target:"_blank",rel:"noreferrer",children:(0,Y.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,Y.jsx)("p",{className:"text-sm",children:"Documentation"}),(0,Y.jsx)(z.Z,{size:16,strokeWidth:1.5})]})})})]}),void 0!==a&&(0,Y.jsxs)("p",{className:"text-xs text-scale-1000",children:["Last updated at: ",a]})]})}),(0,Y.jsx)("div",{className:"col-span-12 lg:col-span-7 space-y-6",children:s})]})})})},we=function(e){var t=e.title,i=e.description;return(0,Y.jsx)("div",{className:"border-b",children:(0,Y.jsx)("div",{className:"1xl:px-28 mx-auto flex flex-col gap-10 px-5 lg:px-16 2xl:px-32 py-16",children:(0,Y.jsxs)("div",{className:"sticky top-16",children:[(0,Y.jsx)("p",{className:"text-base",children:t}),(0,Y.jsx)("p",{className:"text-sm text-scale-1000",children:i})]})})})},ke=function(e,t){return t?(null===t||void 0===t?void 0:t.tier.supabase_prod_id)===p.ev.ENTERPRISE?"/project/".concat(e,"/settings/billing/update/enterprise"):(null===t||void 0===t?void 0:t.tier.supabase_prod_id)===p.ev.TEAM?"/project/".concat(e,"/settings/billing/update/team"):(null===t||void 0===t?void 0:t.tier.supabase_prod_id)===p.ev.FREE?"/project/".concat(e,"/settings/billing/update"):"/project/".concat(e,"/settings/billing/update/pro"):"/project/".concat(e,"/settings/billing/update")},De=function(e){var t,i,a,s,r,o,d,l,c,u,h,x,v,f=e.projectRef,g=(0,T.DK)({projectRef:f}).data,b=(0,m.S2)({projectRef:f}).data,y=null!==(t=null===b||void 0===b?void 0:b.billing)&&void 0!==t?t:{},_=y.current_period_start,N=y.current_period_end,w=void 0!==_?new Date(1e3*_).toISOString():void 0,k=void 0!==N?new Date(1e3*N).toISOString():void 0,z=je.find((function(e){return"activity"===e.key})),R=ke(f,b),S=(null===b||void 0===b?void 0:b.tier.supabase_prod_id)===p.ev.FREE,Z=(null===b||void 0===b?void 0:b.tier.supabase_prod_id)===p.ev.PRO,O=S||Z?"text-red-900":"text-amber-900",L=ne({projectRef:f,attribute:"total_auth_billing_period_mau",interval:"1d",startDate:w,endDate:k}),M=L.data,I=L.isLoading,B=ne({projectRef:f,attribute:"total_auth_billing_period_sso_mau",interval:"1d",startDate:w,endDate:k}),C=B.data,F=B.isLoading,A=ne({projectRef:f,attribute:"total_storage_image_render_count",interval:"1d",startDate:w,endDate:k}),W=A.data,q=(A.isLoading,ne({projectRef:f,attribute:"total_func_invocations",interval:"1d",startDate:w,endDate:k})),G=q.data,K=q.isLoading,V=ne({projectRef:f,attribute:"total_realtime_message_count",interval:"1d",startDate:w,endDate:k}),H=V.data,Q=V.isLoading,X=ne({projectRef:f,attribute:"total_realtime_peak_connection",interval:"1d",startDate:w,endDate:k}),$=X.data,J=X.isLoading,ee={monthly_active_users:{data:null!==(i=null===M||void 0===M?void 0:M.data)&&void 0!==i?i:[],margin:18,isLoading:I,hasNoData:null!==(a=null===M||void 0===M?void 0:M.hasNoData)&&void 0!==a&&a},monthly_active_sso_users:{data:null!==(s=null===C||void 0===C?void 0:C.data)&&void 0!==s?s:[],margin:20,isLoading:F,hasNoData:null!==(r=null===C||void 0===C?void 0:C.hasNoData)&&void 0!==r&&r},storage_image_render_count:{data:null!==(o=null===W||void 0===W?void 0:W.data)&&void 0!==o?o:[],margin:0,isLoading:F,hasNoData:null!==(d=null===W||void 0===W?void 0:W.hasNoData)&&void 0!==d&&d},func_invocations:{data:null!==(l=null===G||void 0===G?void 0:G.data)&&void 0!==l?l:[],margin:26,isLoading:K,hasNoData:null!==(c=null===G||void 0===G?void 0:G.hasNoData)&&void 0!==c&&c},realtime_message_count:{data:null!==(u=null===H||void 0===H?void 0:H.data)&&void 0!==u?u:[],margin:38,isLoading:Q,hasNoData:null!==(h=null===H||void 0===H?void 0:H.hasNoData)&&void 0!==h&&h},realtime_peak_connection:{data:null!==(x=null===$||void 0===$?void 0:$.data)&&void 0!==x?x:[],margin:0,isLoading:J,hasNoData:null!==(v=null===$||void 0===$?void 0:$.hasNoData)&&void 0!==v&&v}};return void 0===z?null:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(we,{title:z.name,description:z.description}),z.attributes.map((function(e){var t,i,a,s,r,o,d,l,c,u,m,p,h,x=null===g||void 0===g?void 0:g[e.key],v="number"!==typeof x?(null!==(t=null===x||void 0===x?void 0:x.usage)&&void 0!==t?t:0)/(null!==(i=null===x||void 0===x?void 0:x.limit)&&void 0!==i?i:0):0,f=(null!==(a=null===x||void 0===x?void 0:x.usage)&&void 0!==a?a:0)-(null!==(s=null===x||void 0===x?void 0:x.limit)&&void 0!==s?s:0),y=null!==(r=null===(o=ee[e.key])||void 0===o?void 0:o.data)&&void 0!==r?r:[],_=y.find((function(t){return t.loopId>0&&0===t[e.attribute]}));void 0===_||null!==(d=ee[e.key])&&void 0!==d&&d.hasNoData||n()(_.period_start).subtract(1,"day").format("DD MMM YYYY, HH:mma (ZZ)");return(0,Y.jsx)("div",{id:e.anchor,children:(0,Y.jsx)(Ne,{section:e,includedInPlan:null===x||void 0===x?void 0:x.available_in_plan,children:(null===x||void 0===x?void 0:x.available_in_plan)&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Y.jsxs)("p",{className:"text-sm",children:[e.name," quota usage"]}),v>=1?(0,Y.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px]",children:[(0,Y.jsx)(re.Z,{size:14,strokeWidth:2,className:O}),(0,Y.jsx)("p",{className:"text-sm ".concat(O),children:"Exceeded limit"})]}):v>=oe?(0,Y.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px]",children:[(0,Y.jsx)(re.Z,{size:14,strokeWidth:2,className:"text-amber-900"}),(0,Y.jsx)("p",{className:"text-sm text-amber-900",children:"Approaching limit"})]}):null]}),S&&(0,Y.jsx)(j(),{href:R,children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{type:"default",size:"tiny",children:"Upgrade project"})})})]}),x.limit>0&&(0,Y.jsx)(P.Z,{type:"horizontal",barClass:(0,U.Z)(v>=1?"bg-red-900":v>=oe?"bg-amber-900":"bg-scale-1100"),value:null!==(l=null===x||void 0===x?void 0:x.usage)&&void 0!==l?l:0,max:null!==(c=null===x||void 0===x?void 0:x.limit)&&void 0!==c?c:0}),(0,Y.jsxs)("div",{children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,Y.jsxs)("p",{className:"text-xs text-scale-1000",children:["Included in ",null===b||void 0===b?void 0:b.tier.name.toLowerCase()]}),-1===(null===x||void 0===x?void 0:x.limit)?(0,Y.jsx)("p",{className:"text-xs",children:"None"}):(0,Y.jsx)("p",{className:"text-xs",children:(null!==(u=null===x||void 0===x?void 0:x.limit)&&void 0!==u?u:0).toLocaleString()})]}),(0,Y.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Used"}),(0,Y.jsx)("p",{className:"text-xs",children:(null!==(m=null===x||void 0===x?void 0:x.usage)&&void 0!==m?m:0).toLocaleString()})]}),x.limit>0&&(0,Y.jsxs)("div",{className:"flex items-center justify-between border-t py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Extra volume used this month"}),(0,Y.jsx)("p",{className:"text-xs",children:(-1===(null!==(p=null===x||void 0===x?void 0:x.limit)&&void 0!==p?p:0)||f<0?0:f).toLocaleString()})]})]})]}),(0,Y.jsxs)("div",{className:"space-y-1",children:[(0,Y.jsxs)("p",{children:[e.name," over time"]}),e.chartDescription.split("\n").map((function(e,t){return(0,Y.jsx)("p",{className:"text-sm text-scale-1000",children:e},"para-".concat(t))}))]}),ee[e.key].isLoading?(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsx)(E.Z,{}),(0,Y.jsx)(E.Z,{className:"w-3/4"}),(0,Y.jsx)(E.Z,{className:"w-1/2"})]}):(0,Y.jsx)(_e,{hasQuota:!0,name:e.name,unit:e.unit,attribute:e.attribute,data:y,yLimit:null!==(h=null===x||void 0===x?void 0:x.limit)&&void 0!==h?h:0,yLeftMargin:ee[e.key].margin,yFormatter:function(e){return e.toLocaleString()},quotaWarningType:S||Z?"danger":"warning"})]})})},e.key)}))]})},ze=function(e){var t,i,a,s,r,o=e.projectRef,d=(0,T.DK)({projectRef:o}).data,l=(0,m.S2)({projectRef:o}).data,c=null!==(t=null===l||void 0===l?void 0:l.billing)&&void 0!==t?t:{},u=c.current_period_start,h=c.current_period_end,x=void 0!==u?new Date(1e3*u).toISOString():void 0,v=void 0!==h?new Date(1e3*h).toISOString():void 0,f=je.find((function(e){return"bandwidth"===e.key})),g=ke(o,l),b=(null===l||void 0===l?void 0:l.tier.supabase_prod_id)===p.ev.FREE,y=(null===l||void 0===l?void 0:l.tier.supabase_prod_id)===p.ev.PRO,_=b||y?"text-red-900":"text-amber-900",N=ne({projectRef:o,attribute:"total_egress_modified",interval:"1d",startDate:x,endDate:v}),w=N.data,k=N.isLoading,z=ne({projectRef:o,attribute:"total_storage_egress",interval:"1d",startDate:x,endDate:v}),R=z.data,S=z.isLoading,Z={db_egress:{data:null!==(i=null===w||void 0===w?void 0:w.data)&&void 0!==i?i:[],margin:16,isLoading:k,hasNoData:null!==(a=null===w||void 0===w?void 0:w.hasNoData)&&void 0!==a&&a},storage_egress:{data:null!==(s=null===R||void 0===R?void 0:R.data)&&void 0!==s?s:[],margin:14,isLoading:S,hasNoData:null!==(r=null===R||void 0===R?void 0:R.hasNoData)&&void 0!==r&&r}};return void 0===f?null:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(we,{title:f.name,description:f.description}),f.attributes.map((function(e){var t,i,a,s,r,o,c,u,m,h,x,v,f,N=null===d||void 0===d?void 0:d[e.key],w="number"!==typeof N?(null!==(t=null===N||void 0===N?void 0:N.usage)&&void 0!==t?t:0)/(null!==(i=null===N||void 0===N?void 0:N.limit)&&void 0!==i?i:0):0,k=(null!==(a=null===N||void 0===N?void 0:N.usage)&&void 0!==a?a:0)-(null!==(s=null===N||void 0===N?void 0:N.limit)&&void 0!==s?s:0),z=null!==(r=null===(o=Z[e.key])||void 0===o?void 0:o.data)&&void 0!==r?r:[],R=z.find((function(t){return t.loopId>0&&0===t[e.attribute]})),S=void 0===R||null!==(c=Z[e.key])&&void 0!==c&&c.hasNoData?void 0:n()(R.period_start).subtract(1,"day").format("DD MMM YYYY, HH:mma (ZZ)");return(0,Y.jsx)("div",{id:e.anchor,children:(0,Y.jsxs)(Ne,{section:e,lastKnownValue:S,children:[(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Y.jsxs)("p",{className:"text-sm",children:[e.name," quota usage"]}),w>=1?(0,Y.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px]",children:[(0,Y.jsx)(re.Z,{size:14,strokeWidth:2,className:_}),(0,Y.jsx)("p",{className:"text-sm ".concat(_),children:"Exceeded limit"})]}):w>=p.wc?(0,Y.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px]",children:[(0,Y.jsx)(re.Z,{size:14,strokeWidth:2,className:"text-amber-900"}),(0,Y.jsx)("p",{className:"text-sm text-amber-900",children:"Approaching limit"})]}):null]}),b&&(0,Y.jsx)(j(),{href:g,children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{type:"default",size:"tiny",children:"Upgrade project"})})})]}),(null===N||void 0===N?void 0:N.limit)>0&&(0,Y.jsx)(P.Z,{type:"horizontal",barClass:(0,U.Z)(w>=1?"bg-red-900":w>=p.wc?"bg-amber-900":"bg-scale-1100"),value:null!==(u=null===N||void 0===N?void 0:N.usage)&&void 0!==u?u:0,max:null!==(m=null===N||void 0===N?void 0:N.limit)&&void 0!==m?m:0}),(0,Y.jsxs)("div",{children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,Y.jsxs)("p",{className:"text-xs text-scale-1000",children:["Included in ",null===l||void 0===l?void 0:l.tier.name.toLowerCase()]}),(0,Y.jsx)("p",{className:"text-xs",children:0===(null===N||void 0===N?void 0:N.limit)?"Unlimited":(0,O.td)(null!==(h=null===N||void 0===N?void 0:N.limit)&&void 0!==h?h:0)})]}),(0,Y.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Used"}),(0,Y.jsx)("p",{className:"text-xs",children:(0,O.td)(null!==(x=null===N||void 0===N?void 0:N.usage)&&void 0!==x?x:0)})]}),(null===N||void 0===N?void 0:N.limit)>0&&(0,Y.jsxs)("div",{className:"flex items-center justify-between border-t py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Extra volume used this month"}),(0,Y.jsx)("p",{className:"text-xs",children:k<0?(0,O.td)(0):(0,O.td)(k)})]})]})]}),(0,Y.jsxs)("div",{className:"space-y-1",children:[(0,Y.jsxs)("p",{children:[e.name," over time"]}),e.chartDescription.split("\n").map((function(e,t){return(0,Y.jsx)("p",{className:"text-sm text-scale-1000",children:e},"para-".concat(t))}))]}),null!==(v=Z[e.key])&&void 0!==v&&v.isLoading?(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsx)(E.Z,{}),(0,Y.jsx)(E.Z,{className:"w-3/4"}),(0,Y.jsx)(E.Z,{className:"w-1/2"})]}):(0,Y.jsx)(_e,{hasQuota:(null===N||void 0===N?void 0:N.limit)>0,name:e.name,unit:e.unit,attribute:e.attribute,data:z,yLimit:null!==(f=null===N||void 0===N?void 0:N.limit)&&void 0!==f?f:0,yLeftMargin:Z[e.key].margin,yFormatter:function(e){return(0,O.td)(e,1,"GB").replace(/\s/g,"")},quotaWarningType:b||y?"danger":"warning"})]})},e.key)}))]})},Re=i(39992),Se=function(e){var t,i,a,s,r,o,d,l=e.projectRef,c=(0,m.S2)({projectRef:l}).data,u=null!==(t=null===c||void 0===c?void 0:c.billing)&&void 0!==t?t:{},h=u.current_period_start,x=u.current_period_end,v=void 0!==h?new Date(1e3*h).toISOString():void 0,f=void 0!==x?new Date(1e3*x).toISOString():void 0,g=je.find((function(e){return"infra"===e.key})),b=ke(l,c),y=(null===c||void 0===c?void 0:c.tier.supabase_prod_id)===p.ev.FREE,_=null===c||void 0===c?void 0:c.addons.find((function(e){return e.supabase_prod_id.includes("_instance_")})),N=ye[null!==(i=null===_||void 0===_?void 0:_.supabase_prod_id)&&void 0!==i?i:"addon_instance_micro"],w=(0,Re.PR)({projectRef:l,attribute:"cpu_usage",interval:"1d",startDate:v,endDate:f}),k=w.data,z=w.isLoading,R=(0,Re.PR)({projectRef:l,attribute:"ram_usage",interval:"1d",startDate:v,endDate:f}),Z=R.data,O=R.isLoading,P=(0,Re.PR)({projectRef:l,attribute:"disk_io_budget",interval:"1d",startDate:v,endDate:f}),L=P.data,M=P.isLoading,I=Number(null!==(a=null===L||void 0===L||null===(s=L.data.find((function(e){return e.periodStartFormatted===n()().format("DD MMM")})))||void 0===s?void 0:s.disk_io_budget)&&void 0!==a?a:100),B={cpu_usage:{isLoading:z,data:null!==(r=null===k||void 0===k?void 0:k.data)&&void 0!==r?r:[]},ram_usage:{isLoading:O,data:null!==(o=null===Z||void 0===Z?void 0:Z.data)&&void 0!==o?o:[]},disk_io_budget:{isLoading:M,data:null!==(d=null===L||void 0===L?void 0:L.data)&&void 0!==d?d:[]}};return void 0===g?null:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(we,{title:g.name,description:g.description}),g.attributes.map((function(e){var t,i,a,s=null!==(t=null===(i=B[e.key])||void 0===i?void 0:i.data)&&void 0!==t?t:[],r=s.find((function(t){return t.loopId>0&&0===t[e.attribute]})),o=void 0!==r?n()(r.period_start).subtract(1,"day").format("DD MMM YYYY, HH:mma (ZZ)"):void 0;return(0,Y.jsx)("div",{id:e.anchor,children:(0,Y.jsxs)(Ne,{section:e,lastKnownValue:o,children:["disk_io_budget"===e.key&&(0,Y.jsxs)(Y.Fragment,{children:[I<=0?(0,Y.jsxs)(S.Z,{withIcon:!0,variant:"danger",title:"IO Budget for today has been used up",children:[(0,Y.jsx)("p",{className:"mb-4",children:"Your workload has used up all the burst IO throughput minutes during the day and is running at the baseline performance. If you need consistent disk performance, consider upgrading to a larger compute add-on."}),(0,Y.jsx)(j(),{href:b,children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{type:"danger",children:y?"Upgrade project":"Change compute add-on"})})})]}):I<=20?(0,Y.jsxs)(S.Z,{withIcon:!0,variant:"warning",title:"IO Budget for today is running out",children:[(0,Y.jsx)("p",{className:"mb-4",children:"Your workload is about to use up all the burst IO throughput minutes during the day. Once this is completely used up, your workload will run at the baseline performance. If you need consistent disk performance, consider upgrading to a larger compute add-on."}),(0,Y.jsx)(j(),{href:b,children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{type:"warning",children:y?"Upgrade project":"Change compute add-on"})})})]}):null,(0,Y.jsxs)("div",{className:"space-y-1",children:[(0,Y.jsx)("p",{children:"What is Disk IO Bandwidth?"}),(0,Y.jsx)("p",{className:"text-sm text-scale-1000",children:"Smaller compute instances can burst up to the maximum disk IO bandwidth for 30 minutes in a day. Beyond that, the performance reverts to the baseline disk IO bandwidth."})]}),(0,Y.jsxs)("div",{children:[(0,Y.jsx)("p",{className:"text-sm mb-2",children:"Overview"}),(0,Y.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Current compute instance"}),(0,Y.jsx)("p",{className:"text-xs",children:null!==(a=null===_||void 0===_?void 0:_.name)&&void 0!==a?a:"Micro"})]}),(0,Y.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Maximum IO Bandwidth (burst limit)"}),(0,Y.jsxs)("p",{className:"text-xs",children:[N.maxBandwidth.toLocaleString()," Mbps"]})]}),(0,Y.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Baseline IO Bandwidth"}),(0,Y.jsxs)("p",{className:"text-xs",children:[N.baseBandwidth.toLocaleString()," Mbps"]})]}),(0,Y.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Daily burst time limit"}),(0,Y.jsx)("p",{className:"text-xs",children:"30 mins"})]})]})]}),(0,Y.jsxs)("div",{className:"space-y-1",children:["disk_io_budget"===e.key?(0,Y.jsx)("p",{children:"IO Budget remaining each day"}):(0,Y.jsxs)("p",{children:["Max"," ",(0,Y.jsx)("span",{className:"ram_usage"===e.key?"lowercase":"",children:e.name})," ","usage each day"]}),e.chartDescription.split("\n").map((function(e,t){return(0,Y.jsx)("p",{className:"text-sm text-scale-1000",children:e},"para-".concat(t))}))]}),B[e.key].isLoading?(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsx)(E.Z,{}),(0,Y.jsx)(E.Z,{className:"w-3/4"}),(0,Y.jsx)(E.Z,{className:"w-1/2"})]}):(0,Y.jsx)(_e,{name:e.name,unit:e.unit,attribute:e.attribute,data:s,yFormatter:function(e){return"".concat(e,"%")},yLimit:100})]})},e.key)}))]})},Ze=function(e){var t,i,a,s,r,o,d,l=e.projectRef,c=(0,T.DK)({projectRef:l}).data,u=(0,m.S2)({projectRef:l}).data,h=null!==(t=null===u||void 0===u?void 0:u.billing)&&void 0!==t?t:{},x=h.current_period_start,v=h.current_period_end,f=void 0!==x?new Date(1e3*x).toISOString():void 0,g=void 0!==v?new Date(1e3*v).toISOString():void 0,b=je.find((function(e){return"sizeCount"===e.key})),y=ke(l,u),_=(null===u||void 0===u?void 0:u.tier.supabase_prod_id)===p.ev.FREE,N=(null===u||void 0===u?void 0:u.tier.supabase_prod_id)===p.ev.PRO,w=_||N?"text-red-900":"text-amber-900",R=ne({projectRef:l,attribute:"total_db_size_bytes",interval:"1d",startDate:f,endDate:g}),S=R.data,Z=R.isLoading,L=ne({projectRef:l,attribute:"total_storage_size_bytes",interval:"1d",startDate:f,endDate:g}),M=L.data,I=L.isLoading,B=ne({projectRef:l,attribute:"total_func_count",interval:"1d",startDate:f,endDate:g}),C=B.data,F=B.isLoading,A={db_size:{isLoading:Z,margin:14,data:null!==(i=null===S||void 0===S?void 0:S.data)&&void 0!==i?i:[],hasNoData:null!==(a=null===S||void 0===S?void 0:S.hasNoData)&&void 0!==a&&a},storage_size:{isLoading:I,margin:14,data:null!==(s=null===M||void 0===M?void 0:M.data)&&void 0!==s?s:[],hasNoData:null!==(r=null===M||void 0===M?void 0:M.hasNoData)&&void 0!==r&&r},func_count:{isLoading:F,margin:0,data:null!==(o=null===C||void 0===C?void 0:C.data)&&void 0!==o?o:[],hasNoData:null!==(d=null===C||void 0===C?void 0:C.hasNoData)&&void 0!==d&&d}};return void 0===b?null:(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(we,{title:b.name,description:b.description}),b.attributes.map((function(e){var t,i,a,s,r,o,d,l,m,h,x,v,f,g,b=null===c||void 0===c?void 0:c[e.key],R="number"!==typeof b?(null!==(t=null===b||void 0===b?void 0:b.usage)&&void 0!==t?t:0)/(null!==(i=null===b||void 0===b?void 0:b.limit)&&void 0!==i?i:0):0,S=(null!==(a=null===b||void 0===b?void 0:b.usage)&&void 0!==a?a:0)-(null!==(s=null===b||void 0===b?void 0:b.limit)&&void 0!==s?s:0),Z=null!==(r=null===(o=A[e.key])||void 0===o?void 0:o.data)&&void 0!==r?r:[],L=Z.find((function(t){return t.loopId>0&&0===t[e.attribute]})),M=void 0===L||null!==(d=A[e.key])&&void 0!==d&&d.hasNoData?void 0:n()(L.period_start).subtract(1,"day").format("DD MMM YYYY, HH:mma (ZZ)");return(0,Y.jsx)("div",{id:e.anchor,children:(0,Y.jsxs)(Ne,{section:e,lastKnownValue:M,children:[(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Y.jsxs)("p",{className:"text-sm",children:[e.name," quota usage"]}),R>=1?(0,Y.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px]",children:[(0,Y.jsx)(re.Z,{size:14,strokeWidth:2,className:w}),(0,Y.jsx)("p",{className:"text-sm ".concat(w),children:"Exceeded limit"})]}):R>=oe?(0,Y.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px]",children:[(0,Y.jsx)(re.Z,{size:14,strokeWidth:2,className:"text-amber-900"}),(0,Y.jsx)("p",{className:"text-sm text-amber-900",children:"Approaching limit"})]}):null]}),_&&(0,Y.jsx)(j(),{href:y,children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{type:"default",size:"tiny",children:"Upgrade project"})})})]}),b.limit>0&&(0,Y.jsx)(P.Z,{type:"horizontal",barClass:(0,U.Z)(R>=1?"bg-red-900":R>=oe?"bg-amber-900":"bg-scale-1100"),value:null!==(l=null===b||void 0===b?void 0:b.usage)&&void 0!==l?l:0,max:null!==(m=null===b||void 0===b?void 0:b.limit)&&void 0!==m?m:0}),(0,Y.jsxs)("div",{children:[(0,Y.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,Y.jsxs)("p",{className:"text-xs text-scale-1000",children:["Included in ",null===u||void 0===u?void 0:u.tier.name.toLowerCase()]}),(0,Y.jsx)("p",{className:"text-xs",children:"bytes"===e.unit?(0,O.td)(null!==(h=null===b||void 0===b?void 0:b.limit)&&void 0!==h?h:0):(null!==(x=null===b||void 0===b?void 0:b.limit)&&void 0!==x?x:0).toLocaleString()})]}),(0,Y.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Used"}),(0,Y.jsx)("p",{className:"text-xs",children:"bytes"===e.unit?(0,O.td)(null!==(v=null===b||void 0===b?void 0:b.usage)&&void 0!==v?v:0):(null!==(f=null===b||void 0===b?void 0:b.usage)&&void 0!==f?f:0).toLocaleString()})]}),b.limit>0&&(0,Y.jsxs)("div",{className:"flex items-center justify-between border-t py-1",children:[(0,Y.jsx)("p",{className:"text-xs text-scale-1000",children:"Extra volume used this month"}),(0,Y.jsx)("p",{className:"text-xs",children:S<0?"bytes"===e.unit?(0,O.td)(0):0:"bytes"===e.unit?(0,O.td)(S):S.toLocaleString()})]})]})]}),"db_size"===e.key&&(null===u||void 0===u?void 0:u.tier.supabase_prod_id)!==p.ev.FREE&&(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Y.jsx)("p",{className:"text-sm",children:"Disk size:"}),(0,Y.jsxs)("p",{className:"text-sm",children:[null===c||void 0===c?void 0:c.disk_volume_size_gb," GB"]}),(0,Y.jsx)(k.Z,{color:"green",size:"small",children:"Auto-scaling"})]}),(0,Y.jsx)(j(),{href:"https://supabase.com/docs/guides/platform/database-usage#disk-management",children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{size:"tiny",type:"default",icon:(0,Y.jsx)(z.Z,{size:14}),children:"What is disk size?"})})})]}),(0,Y.jsxs)("div",{className:"space-y-1",children:[(0,Y.jsxs)("p",{children:[e.name," over time"]}),e.chartDescription.split("\n").map((function(e,t){return(0,Y.jsx)("p",{className:"text-sm text-scale-1000",children:e},"para-".concat(t))}))]}),A[e.key].isLoading?(0,Y.jsxs)("div",{className:"space-y-2",children:[(0,Y.jsx)(E.Z,{}),(0,Y.jsx)(E.Z,{className:"w-3/4"}),(0,Y.jsx)(E.Z,{className:"w-1/2"})]}):(0,Y.jsx)(_e,{hasQuota:!0,name:e.name,unit:e.unit,attribute:e.attribute,data:Z,yLimit:null!==(g=null===b||void 0===b?void 0:b.limit)&&void 0!==g?g:0,yLeftMargin:A[e.key].margin,yFormatter:function(t){return"bytes"===e.unit?(0,O.td)(t,1,"GB").replace(/\s/g,""):t.toLocaleString()},quotaWarningType:_||N?"danger":"warning"})]})},e.key)}))]})},Oe=function(){var e,t,i,a,s,r,d,l=(0,A.UO)().ref,c=(0,o.useState)(l),u=c[0],p=(c[1],(0,o.useRef)(null)),h=(0,o.useRef)(null),x=(0,o.useRef)(null),v=(0,o.useRef)(null),f=(0,T.DK)({projectRef:l}).data,g=(0,m.S2)({projectRef:u}),b=g.data,y=g.isLoading,_=null!==(e=null===b||void 0===b?void 0:b.billing)&&void 0!==e?e:{},N=_.current_period_start,k=_.current_period_end,z=void 0!==N?new Date(1e3*N).toISOString():void 0,R=void 0!==k?new Date(1e3*k).toISOString():void 0,S=(0,Re.PR)({projectRef:u,attribute:"disk_io_budget",interval:"1d",startDate:z,endDate:R}).data,Z=Number(null!==(t=null===S||void 0===S||null===(i=S.data.find((function(e){return e.periodStartFormatted===n()().format("DD MMM")})))||void 0===i?void 0:i.disk_io_budget)&&void 0!==t?t:100),O=n().unix(null!==(a=null===b||void 0===b||null===(s=b.billing)||void 0===s?void 0:s.current_period_start)&&void 0!==a?a:0).utc(),P=n().unix(null!==(r=null===b||void 0===b||null===(d=b.billing)||void 0===d?void 0:d.current_period_end)&&void 0!==r?r:0).utc();return(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("div",{className:"border-b",children:(0,Y.jsxs)("div",{className:"1xl:px-28 mx-auto flex flex-col px-5 lg:px-16 2xl:px-32 pt-6 space-y-4",children:[(0,Y.jsx)("h3",{className:"text-scale-1200 text-xl",children:"Usage"}),(0,Y.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Y.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Y.jsxs)(W.Z,{disabled:!0,size:"small",id:"billingCycle",name:"billingCycle",value:"current",className:"!w-[200px]",onChange:function(){},children:[(0,Y.jsx)(W.Z.Option,{label:"Current billing cycle",value:"current",children:"Current billing cycle"}),(0,Y.jsx)(W.Z.Option,{label:"Previous billing cycle",value:"previous",children:"Previous billing cycle"})]}),y?(0,Y.jsx)(q.Z,{className:"animate-spin",size:14}):void 0!==b?(0,Y.jsxs)("div",{children:[(0,Y.jsxs)("p",{className:(0,U.Z)("text-sm transition",y&&"opacity-50"),children:["Project is on ",b.tier.name]}),(0,Y.jsxs)("p",{className:"text-sm text-scale-1000",children:[O.format("DD MMM YY")," - ",P.format("DD MMM YY")]})]}):null]}),(0,Y.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Y.jsx)(j(),{href:"/project/".concat(u,"/settings/billing/invoices"),children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{type:"default",children:"View invoices"})})}),(0,Y.jsx)(j(),{href:"/project/".concat(u,"/settings/billing/subscription"),children:(0,Y.jsx)("a",{children:(0,Y.jsx)(D.z,{type:"default",children:"View billing"})})})]})]}),(0,Y.jsx)("div",{className:"flex items-center space-x-6 !mt-2",children:je.map((function(e){var t=Z<=0?be:Z<=20?ge:fe,i="infra"===e.key?t:function(e,t){if(!t)return fe;var i=e.map((function(e){var i,a,s=null===t||void 0===t?void 0:t[e.key],n="number"!==typeof s?(null!==(i=null===s||void 0===s?void 0:s.usage)&&void 0!==i?i:0)/(null!==(a=null===s||void 0===s?void 0:s.limit)&&void 0!==a?a:0):0;return n>=1?be:n>=oe?ge:fe}));return i.find((function(e){return e===be}))?be:i.find((function(e){return e===ge}))?ge:fe}(e.attributes,f);return(0,Y.jsxs)("div",{onClick:function(){return function(e){switch(e){case"infra":p.current&&p.current.scrollIntoView({behavior:"smooth"});break;case"bandwidth":h.current&&h.current.scrollIntoView({behavior:"smooth"});break;case"sizeCount":x.current&&x.current.scrollIntoView({behavior:"smooth"});break;case"activity":v.current&&v.current.scrollIntoView({behavior:"smooth"})}}(e.key)},className:"flex items-center opacity-50 space-x-2 py-3 hover:opacity-100 transition cursor-pointer",children:[i===fe?(0,Y.jsx)(G.Z,{size:15,strokeWidth:2,className:"text-scale-1100"}):i===ge?(0,Y.jsx)(w.Z,{size:15,strokeWidth:2,className:"text-amber-900"}):i===be?(0,Y.jsx)(w.Z,{size:15,strokeWidth:2,className:"text-red-900"}):null,(0,Y.jsx)("p",{className:"text-sm",children:e.name})]},e.key)}))})]})}),(0,Y.jsx)("div",{id:"infrastructure",ref:p,children:(0,Y.jsx)(Se,{projectRef:u})}),(0,Y.jsx)("div",{id:"bandwidth",ref:h,children:(0,Y.jsx)(ze,{projectRef:u})}),(0,Y.jsx)("div",{id:"size_and_counts",ref:x,children:(0,Y.jsx)(Ze,{projectRef:u})}),(0,Y.jsx)("div",{id:"activity",ref:v,children:(0,Y.jsx)(De,{projectRef:u})})]})},Pe=function(){var e=(0,u.P5)("usagev2"),t=(0,o.useState)(e),i=t[0],a=t[1];return(0,Y.jsxs)("div",{className:"relative",children:[e&&(0,Y.jsxs)("div",{className:"absolute top-[1.9rem] right-16 flex items-center space-x-3",children:[(0,Y.jsx)(d.Z,{size:"tiny",checked:i,onChange:function(){return a(!i)}}),(0,Y.jsx)("p",{className:"text-xs text-scale-1100 -translate-y-[1px]",children:"Preview new interface"})]}),e&&i?(0,Y.jsx)(Oe,{}):(0,Y.jsx)("div",{className:"w-full h-full overflow-y-auto content",children:(0,Y.jsx)("div",{className:"w-full mx-auto",children:(0,Y.jsx)(Le,{})})})]})};Pe.getLayout=function(e){return(0,Y.jsx)(h.dU,{title:"Billing and Usage",children:e})};var Ee=(0,r.Pi)(Pe),Le=function(){var e,t,i=(0,u.oR)().ui,s=i.selectedProject,r=(0,m.S2)({projectRef:null===(e=i.selectedProject)||void 0===e?void 0:e.ref}),d=r.data,h=r.isLoading,g=r.error,b=(0,o.useState)(),j=b[0],y=b[1],_=(null===d||void 0===d||null===(t=d.tier)||void 0===t?void 0:t.prod_id)===p.Tx.PAYG;return(0,o.useEffect)((function(){var e;g&&i.setNotification({category:"error",message:"Failed to get project subscription: ".concat(null!==(e=null===g||void 0===g?void 0:g.message)&&void 0!==e?e:"unknown")})}),[g]),d?(0,Y.jsx)("div",{className:"container max-w-4xl p-4 space-y-8",children:h?(0,Y.jsx)(l.Z,{active:h,children:(0,Y.jsx)("div",{className:"w-full mb-8 overflow-hidden border rounded border-panel-border-light dark:border-panel-border-dark",children:(0,Y.jsx)("div",{className:"flex items-center justify-center px-6 py-6 bg-panel-body-light dark:bg-panel-body-dark",children:(0,Y.jsx)("p",{children:"Loading usage breakdown"})})})}):_?(0,Y.jsxs)("div",{children:[(0,Y.jsxs)("div",{className:"flex items-center mb-4 space-x-3",children:[(0,Y.jsx)(v.Z,{onChange:y,value:p.eB[0].key,options:[].concat((0,a.Z)(p.eB),(0,a.Z)(p._T)),loading:h,currentBillingPeriodStart:null===d||void 0===d?void 0:d.billing.current_period_start}),j&&(0,Y.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Y.jsx)("p",{className:"text-scale-1000",children:n()(j.period_start.date).format("MMM D, YYYY")}),(0,Y.jsx)("p",{className:"text-scale-1000",children:(0,Y.jsx)(c.Z,{size:12})}),(0,Y.jsx)("p",{className:"text-scale-1000",children:n()(j.period_end.date).format("MMM D, YYYY")})]})]}),j&&(0,Y.jsx)(f.PAYGUsage,{dateRange:j})]}):(0,Y.jsx)(F,{projectRef:null===s||void 0===s?void 0:s.ref})}):(0,Y.jsx)(x.Z,{})}},44076:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/billing/usage",function(){return i(35605)}])}},function(e){e.O(0,[7930,1188,6888,1114,6412,2056,5286,3453,2382,9774,2888,179],(function(){return t=44076,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=usage-ed4b69d577d4a62b.js.map