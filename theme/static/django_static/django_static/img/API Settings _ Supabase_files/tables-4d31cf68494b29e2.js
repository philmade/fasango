(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7688],{71457:function(e,t,n){"use strict";n.r(t);var r=n(55732),o=n(34707),i=n.n(o),a=n(85945),c=n(27378),s=n(43659),l=n(98784),u=n(94269),f=n(27102),d=n(41532),p=n(42753),v=n(63840),b=n(6666),m=n(32062),h=n(47510),y=n(24246),g=function(){var e,t=(0,f.oR)(),n=t.meta,o=t.ui,s=(0,h.d2)().project,p=(0,a.NL)(),g=(0,c.useState)(!1),w=g[0],O=g[1],x=(0,c.useState)("public"),j=x[0],k=x[1],S=(0,c.useState)(),C=S[0],E=S[1],T=(0,c.useState)(),P=T[0],N=T[1],L=(0,c.useState)(),_=L[0],z=L[1],Z=(0,c.useState)(),B=Z[0],D=Z[1],I=(0,c.useState)(),U=I[0],R=I[1],A=(0,c.useState)(),M=A[0],W=A[1];(0,c.useEffect)((function(){var e;null!==(e=o.selectedProject)&&void 0!==e&&e.ref&&n.types.load()}),[null===(e=o.selectedProject)||void 0===e?void 0:e.ref]);var q=function(){var e=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.tables.loadById(C.id);case 4:t=e.sent,E(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0,l.isUndefined)(M)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.tables.del(M.id);case 5:if(!(t=e.sent).error){e.next=10;break}throw t.error;case 10:o.setNotification({category:"success",message:"Successfully removed ".concat(M.name,".")});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),o.setNotification({category:"error",message:"Failed to delete ".concat(null===M||void 0===M?void 0:M.name,": ").concat(e.t0.message)});case 16:return e.prev=16,O(!1),W(void 0),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[0,13,16,20]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,r.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0,l.isUndefined)(U)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.columns.del(U.id);case 5:if(!(t=e.sent).error){e.next=10;break}throw t.error;case 10:return q(),o.setNotification({category:"success",message:"Successfully removed ".concat(U.name,".")}),p.invalidateQueries(d.M.query(null===s||void 0===s?void 0:s.ref,["foreign-key-constraints"])),e.next=15,Promise.all([n.tables.loadById(U.table_id),p.invalidateQueries(d.M.query(null===s||void 0===s?void 0:s.ref,[C.schema,C.name])),p.invalidateQueries(d.M.query(null===s||void 0===s?void 0:s.ref,["table-definition",C.schema,C.name]))]);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),o.setNotification({category:"error",message:"Failed to delete ".concat(null===U||void 0===U?void 0:U.name,": ").concat(e.t0.message)});case 20:return e.prev=20,O(!1),R(void 0),e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[0,17,20,24]])})));return function(){return e.apply(this,arguments)}}();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"p-4",children:(0,l.isUndefined)(C)?(0,y.jsx)(b.bw,{selectedSchema:j,onSelectSchema:k,onAddTable:function(){N("table"),D(void 0)},onEditTable:function(e){N("table"),D(e)},onDeleteTable:function(e){O(!0),W(e)},onOpenTable:E}):(0,y.jsx)(b.TH,{selectedTable:C,onAddColumn:function(){N("column"),z(void 0)},onEditColumn:function(e){N("column"),z(e)},onDeleteColumn:function(e){O(!0),R(e)},onSelectBack:function(){return E(void 0)}})}),(0,y.jsx)(v.Z,{danger:!0,visible:w&&!(0,l.isUndefined)(M),header:(0,y.jsx)("span",{className:"break-words",children:'Confirm deletion of table "'.concat(null===M||void 0===M?void 0:M.name,'"')}),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:function(){return O(!1)},onSelectConfirm:F,children:(0,y.jsx)(u.C.Content,{children:(0,y.jsx)("p",{className:"py-4 text-sm text-scale-1100",children:"Are you sure you want to delete the selected table? This action cannot be undone."})})}),(0,y.jsx)(v.Z,{danger:!0,visible:w&&!(0,l.isUndefined)(U),header:'Confirm deletion of column "'.concat(null===U||void 0===U?void 0:U.name,'"'),buttonLabel:"Delete",buttonLoadingLabel:"Deleting",onSelectCancel:function(){return O(!1)},onSelectConfirm:Q,children:(0,y.jsx)(u.C.Content,{children:(0,y.jsx)("p",{className:"py-4 text-sm text-scale-1100",children:"Are you sure you want to delete the selected column? This action cannot be undone."})})}),(0,y.jsx)(m.l5,{sidePanelKey:P,selectedSchema:j,selectedTable:C,onColumnSaved:q,closePanel:function(){return N(void 0)},selectedColumnToEdit:_,selectedTableToEdit:B})]})};g.getLayout=function(e){return(0,y.jsx)(p._h,{title:"Database",children:e})},t.default=(0,s.Pi)(g)},8841:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/database/tables",function(){return n(71457)}])},24387:function(e,t,n){"use strict";var r=n(27378),o=n(23615),i=n.n(o);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=(0,r.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,i=e.size,s=void 0===i?24:i,l=c(e,["color","size"]);return r.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.createElement("polyline",{points:"18 15 12 9 6 15"}))}));s.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},s.displayName="ChevronUp",t.Z=s},63680:function(e,t,n){"use strict";var r=n(27378),o=n(23615),i=n.n(o);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=(0,r.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,i=e.size,s=void 0===i?24:i,l=c(e,["color","size"]);return r.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.createElement("path",{d:"M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"}))}));s.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},s.displayName="Columns",t.Z=s},35548:function(e,t,n){"use strict";var r=n(27378),o=n(23615),i=n.n(o);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=(0,r.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,i=e.size,s=void 0===i?24:i,l=c(e,["color","size"]);return r.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.createElement("polygon",{points:"10 8 16 12 10 16 10 8"}))}));s.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},s.displayName="PlayCircle",t.Z=s},36596:function(e,t,n){"use strict";var r=n(27378),o=n(23615),i=n.n(o);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=(0,r.forwardRef)((function(e,t){var n=e.color,o=void 0===n?"currentColor":n,i=e.size,s=void 0===i?24:i,l=c(e,["color","size"]);return r.createElement("svg",a({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:o,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.createElement("polyline",{points:"4 17 10 11 4 5"}),r.createElement("line",{x1:"12",y1:"19",x2:"20",y2:"19"}))}));s.propTypes={color:i().string,size:i().oneOfType([i().string,i().number])},s.displayName="Terminal",t.Z=s}},function(e){e.O(0,[8143,7930,1188,6792,8094,6226,2642,3535,2056,5286,6905,8178,6666,923,3457,3324,2062,9774,2888,179],(function(){return t=8841,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=tables-4d31cf68494b29e2.js.map