"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3453],{53453:function(e,t,a){a.d(t,{Z:function(){return G}});var i=a(90849),l=a(90089),n=a(55732),s=a(34707),r=a.n(s),o=a(27378),c=a(86677),d=a(98784),u=a(14971),x=a(33769),v=a(47314),m=a(40622),f=a(83443),h=a(20796),p=a(14919),j=a(27693),g=a.n(j),y=a(72853),b=a(29009),N=a(94831),E=a(3023),w=a(14888),D=a(75358),Z=a(87226),k=a(43815),O=a(24903),L=a(79446),S=a(24246),C=function(e){var t=e.title,a=void 0===t?"No data to show":t,i=e.message,l=void 0===i?"May take 24 hours for data to show":i;return(0,S.jsxs)("div",{className:" flex h-full w-full flex-col items-center justify-center space-y-2 space-y-2 border border-dashed border-scale-600 py-4 text-center ",children:[(0,S.jsx)(L.Z,{className:"text-scale-1100"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-xs text-scale-1100",children:a}),(0,S.jsx)("p",{className:"text-xs text-scale-1000",children:l})]})]})},_=a(54511);var I=function(){return null},M="MMM D, YYYY, hh:mma",F=function(e){var t=e.attribute,a=e.focus,i=e.format,l=e.highlightedValue,n=e.data,s=e.customDateFormat,r=e.label,o=e.minimalHeader,c=void 0!==o&&o,d=e.displayDateInUtc,u=void 0!==d&&d,x=s||("%"==i?M:"MMM D, YYYY"),v="";if(a)if(n)if("%"===i){var m;v=Number(null===(m=n[a])||void 0===m?void 0:m[t]).toFixed(2)}else{var f,h,p;if(t.includes("ingress")||t.includes("egress")||t.includes("bytes"))v=(0,O.td)(null===(f=n[a])||void 0===f?void 0:f[t]);else v=null===(h=n[a])||void 0===h||null===(p=h[t])||void 0===p?void 0:p.toLocaleString()}else v="";else v="%"===i&&l?l.toFixed(2):t.includes("ingress")||t.includes("egress")||t.includes("bytes")?(0,O.td)(l):null===l||void 0===l?void 0:l.toLocaleString();var j,y=(0,S.jsx)("h3",{className:"text-scale-900 "+(c?"text-xs":"text-sm"),children:null!==r&&void 0!==r?r:t}),b=(0,S.jsxs)("h5",{className:"text-xl font-normal text-scale-1200 "+(c?"text-base":"text-2xl"),children:[v,(0,S.jsx)("span",{className:"text-lg",children:i})]}),N=(0,S.jsx)("h5",{className:"text-xs text-scale-900",children:a?n&&n[a]&&(j=n[a].period_start,u?g()(j).utc():g()(j)).format(x):(0,S.jsx)("span",{className:"opacity-0",children:"x"})});return c?(0,S.jsxs)("div",{className:"flex flex-row items-center gap-x-4",style:{minHeight:"1.8rem"},children:[y,(0,S.jsxs)("div",{className:"flex flex-row items-baseline gap-x-2",children:[b,N]})]}):(0,S.jsxs)(S.Fragment,{children:[y,b,N]})};function U(e){var t,a=e.data,i=e.attribute,l=e.yAxisLimit,n=e.format,s=e.highlightedValue,r=e.customDateFormat,c=e.displayDateInUtc,d=void 0!==c&&c,u=e.label,x=e.onBarClick,v=e.minimalHeader,m=e.chartSize,f=void 0===m?"normal":m,h=e.className,p=void 0===h?"":h,j=e.noDataTitle,O=e.noDataMessage,L=!a||function(e,t){return!(!e||!e.find((function(e){return e[t]})))}(a,i),U=(0,o.useState)(null),A=U[0],K=U[1],R=(0,o.useState)(!0),V=R[0],G=R[1],P=function(e){return d?g()(e).utc():g()(e)},T={tiny:76,small:96,normal:160}[f];return(0,S.jsx)(y.Z,{active:!a,children:(0,S.jsxs)("div",{className:p,children:[(0,S.jsx)(F,{minimalHeader:v,attribute:i,focus:A,highlightedValue:s,data:a,label:u,format:n,customDateFormat:r,displayDateInUtc:d}),(0,S.jsx)("div",{style:{width:"100%",height:"".concat(T,"px")},children:L?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(b.h,{width:"100%",height:T,children:(0,S.jsxs)(N.v,{data:a,margin:{top:0,right:0,left:0,bottom:0},className:"cursor-pointer overflow-visible",onMouseMove:function(e){null!==e&&void 0!==e&&e.activeTooltipIndex?(K(e.activeTooltipIndex),G(!1)):(K(null),G(!0))},onMouseLeave:function(){K(!1),G(!0)},onClick:function(e){x&&x(e)},children:[(0,S.jsx)(E.K,{dataKey:"period_start",interval:a?a.length-2:0,angle:0,tick:!1,axisLine:{stroke:_.ZE.AXIS},tickLine:{stroke:_.ZE.AXIS}}),(0,S.jsx)(w.u,{content:(0,S.jsx)(I,{})}),l&&(0,S.jsx)(D.B,{type:"number",domain:[0,l],hide:!0}),(0,S.jsx)(Z.$,{dataKey:i,fill:_.ZE.GREEN_1,animationDuration:300,maxBarSize:48,children:null===a||void 0===a?void 0:a.map((function(e,t){return(0,S.jsx)(k.b,{className:"transition-all duration-300 ".concat(x?"cursor-pointer":""),fill:A===t||V?_.ZE.GREEN_1:_.ZE.GREEN_2,enableBackground:12},"cell-".concat(t))}))})]})}),a&&(0,S.jsxs)("div",{className:"-mt-5 flex items-center justify-between text-xs text-scale-900",children:[(0,S.jsx)("span",{children:P(a[0].period_start).format(r||M)}),(0,S.jsx)("span",{children:P(null===(t=a[(null===a||void 0===a?void 0:a.length)-1])||void 0===t?void 0:t.period_start).format(r||M)})]})]}):(0,S.jsx)(C,{title:j,message:O})})]})})}var A=a(72526),K=["error"];function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,i.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var G=function(e){var t,a,s,j,g=e.label,y=e.attribute,b=e.provider,N=e.startDate,E=e.endDate,w=e.interval,D=e.customDateFormat,Z=e.children,k=void 0===Z?null:Z,O=e.defaultChartStyle,L=void 0===O?"bar":O,C=e.hideChartType,_=void 0!==C&&C,I=e.data,M=e.isLoading,F=e.format,R=e.highlightedValue,G=e.onBarClick,P=(0,c.useRouter)().query.ref,T=(0,o.useState)(!1),Y=T[0],z=T[1],B=(0,o.useState)(void 0),H=B[0],X=B[1],q=(0,o.useState)(L),$=q[0],J=q[1],Q=I||H,W=M||Y;return(0,o.useEffect)((function(){var e=!1,t=function(){var t=(0,n.Z)(r().mark((function t(){var a,n,s,o,c,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return z(!0),n="".concat(h.T5,"/projects/").concat(P,"/").concat(b,"?attribute=").concat(y,"&startDate=").concat(encodeURIComponent(N),"&endDate=").concat(encodeURIComponent(E),"&interval=").concat(w||"1d"),t.next=4,(0,p.U2)(n);case 4:if(s=t.sent,o=s.error,c=(0,l.Z)(s,K),!o&&!(0,d.isUndefined)(c)||e){t.next=11;break}return z(!1),X(void 0),t.abrupt("return",console.error("Chart error:",o));case 11:u=(null!==(a=null===c||void 0===c?void 0:c.data)&&void 0!==a?a:[]).map((function(e,t){return V(V({},e),{},(0,i.Z)({},y,e[y]?Number(e[y]):0))})),e||(X(V(V({},c),{},{data:u})),z(!1));case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return void 0!==I||M||t(),function(){e=!0}}),[N]),R=R||("daily-stats"!==b||y.includes("ingress")||y.includes("egress")?"daily-stats"===b?null===Q||void 0===Q?void 0:Q.total:"log-stats"===b?null===Q||void 0===Q||null===(t=Q.totalGrouped)||void 0===t?void 0:t[y]:null===Q||void 0===Q||null===(a=Q.data[(null===Q||void 0===Q?void 0:Q.data.length)-1])||void 0===a?void 0:a[y]:null===Q||void 0===Q?void 0:Q.maximum),W?(0,S.jsxs)("div",{className:"flex h-52 w-full flex-col items-center justify-center space-y-4",children:[(0,S.jsx)(u.Z,{className:"animate-spin text-scale-700"}),(0,S.jsxs)("p",{className:"text-xs text-scale-900",children:["Loading data for ",g]})]}):(0,d.isUndefined)(Q)?(0,S.jsxs)("div",{className:"flex h-52 w-full flex-col items-center justify-center space-y-4",children:[(0,S.jsx)(x.Z,{className:"text-scale-700"}),(0,S.jsxs)("p",{className:"text-xs text-scale-900",children:["Unable to load data for ",g]})]}):(0,S.jsxs)("div",{className:"h-full w-full",children:[(0,S.jsxs)("div",{className:"absolute right-6 z-50 flex justify-between",children:[(0,S.jsx)("div",{className:"space-y-3",children:k}),!_&&(0,S.jsx)("div",{children:(0,S.jsx)("div",{className:"flex w-full space-x-3",children:(0,S.jsx)(v.z,{type:"default",icon:"bar"===$?(0,S.jsx)(m.Z,{}):(0,S.jsx)(f.Z,{}),onClick:function(){return J("bar"===$?"line":"bar")}})})})]}),"bar"===$?(0,S.jsx)(U,{data:null!==(s=null===Q||void 0===Q?void 0:Q.data)&&void 0!==s?s:[],attribute:y,yAxisLimit:null===Q||void 0===Q?void 0:Q.yAxisLimit,format:F||(null===Q||void 0===Q?void 0:Q.format),highlightedValue:R,label:g,customDateFormat:D,onBarClick:G}):(0,S.jsx)(A.Z,{data:null!==(j=null===Q||void 0===Q?void 0:Q.data)&&void 0!==j?j:[],format:F||(null===Q||void 0===Q?void 0:Q.format),xAxisKey:"period_start",yAxisKey:y,highlightedValue:R,title:g,customDateFormat:D})]})}},72526:function(e,t,a){var i=a(27378),l=a(46888),n=a(3023),s=a(14888),r=a(86108),o=a(27693),c=a.n(o),d=a(54511),u=a(40834),x=a(96600),v=a.n(x),m=a(53661),f=a(16915),h=a(24246);c().extend(v());t.Z=function(e){var t,a,o=e.data,x=e.yAxisKey,v=e.xAxisKey,p=e.format,j=e.customDateFormat,g=void 0===j?d.EE.FULL:j,y=e.title,b=e.highlightedValue,N=e.highlightedLabel,E=e.displayDateInUtc,w=e.minimalHeader,D=e.className,Z=void 0===D?"":D,k=e.size,O=void 0===k?"normal":k,L=(0,f.D3)(O).Container,S=(0,i.useState)(null),C=S[0],_=S[1];if(0===o.length)return(0,h.jsx)(m.Z,{size:O,className:Z});var I,M=null!==C&&o&&o[C]&&(I=o[C][v],E?c()(I).utc():c()(I)).format(g)||N,F=(null!==C?null===(t=o[C])||void 0===t?void 0:t[x]:null)||b;return(0,h.jsxs)("div",{className:["flex flex-col gap-3",Z].join(" "),children:[(0,h.jsx)(u.Z,{title:y,format:p,customDateFormat:g,highlightedValue:"number"===typeof F?(0,f.V2)(F):F,highlightedLabel:M,minimalHeader:w}),(0,h.jsx)(L,{children:(0,h.jsxs)(l.T,{data:o,margin:{top:0,right:0,left:0,bottom:0},className:"overflow-visible",onMouseMove:function(e){e.activeTooltipIndex!==C&&_(e.activeTooltipIndex)},onMouseLeave:function(){return _(null)},children:[(0,h.jsx)("defs",{children:(0,h.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,h.jsx)("stop",{offset:"5%",stopColor:d.ZE.GREEN_1,stopOpacity:.8}),(0,h.jsx)("stop",{offset:"95%",stopColor:d.ZE.GREEN_1,stopOpacity:0})]})}),(0,h.jsx)(n.K,{dataKey:v,interval:o.length-2,angle:0,tick:!1,axisLine:{stroke:d.ZE.AXIS},tickLine:{stroke:d.ZE.AXIS}}),(0,h.jsx)(s.u,{content:function(){return null}}),(0,h.jsx)(r.u,{type:"monotone",dataKey:x,stroke:d.ZE.GREEN_1,fillOpacity:1,fill:"url(#colorUv)"})]})}),o&&(0,h.jsxs)("div",{className:"text-scale-900 -mt-2 flex items-center justify-between text-xs",children:[(0,h.jsx)("span",{children:c()(o[0][v]).format(g)}),(0,h.jsx)("span",{children:c()(null===(a=o[(null===o||void 0===o?void 0:o.length)-1])||void 0===a?void 0:a[v]).format(g)})]})]})}}}]);
//# sourceMappingURL=3453-c3438a54f34b87d5.js.map